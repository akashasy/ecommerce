(function(m){var r=window.AmazonUIPageJS||window.P,B=r._namespace||r.attributeErrors,a=B?B("DetailPageAttachAssets",""):r;a.guardFatal?a.guardFatal(m)(a,window):a.execute(function(){m(a,window)})})(function(m,r,B){"use strict";m.when("A").register("attach-variant-registration",function(a){var c={};return{registerVariantFlag:function(a){if(c.hasOwnProperty(a))throw"Variant flag already registered";c[a]=!0},getVariantFlag:function(a){return c.hasOwnProperty(a)}}});"use strict";m.when("attach-variant-registration").execute(function(a){a.registerVariantFlag("ATTACH_ACCESSIBILITY_SIDE_SHEET_391160:T1")});
"use strict";m.when("A").register("attach-baselink",function(a){var c=null;m.when("BaseLinkFormHelper").execute(function(a){c=a});var h=function(a){r.ueLogError&&r.ueLogError({message:"msi - "+a},{logLevel:"ERROR",attribution:"Mobile_App_SI_Base_Link"})};return{createBaseLinkFormFields:function(a,e){return c?c.addBaseLinkFields(a,e):null},addLinkedWarranty:function(c,e,k){a.ajax("/gp/product/amazon-protect/base-link/services/warranty-service.html",{method:"post",params:c,timeout:1E3,success:function(a){a&&
a.status&&"OK"===a.status&&e()},error:function(){k()}})},obtainBaseItemCartId:function(c){a.ajax("/gp/product/amazon-protect/base-link/services/last-added-cart-item-id.html",{method:"post",timeout:1E3,success:function(a){a&&a.status&&a.lastAddedItemCartId?c(a.lastAddedItemCartId):h("Error while doing a call to last-added-cart-item-id.html. Status: "+a.status)},error:function(a,c,d){h("Error while doing a call to last-added-cart-item-id.html. Status: "+c+" . Error: "+d)}})},mSilogError:h}});"use strict";
m.when("A").register("attach-external-atc-interceptor",function(a){var c=a.$,h=[],b=[],e=!1,k=!1,d=function(){k=!0},l=function(a){var d=b.indexOf(a);-1<d&&(a=c("#attach_add_accessory_alert_"+d),d=c("#attach_add_accessory_button_"+d),a&&d&&(a.removeClass("aok-hidden"),d.addClass("aok-hidden")))};return{updateAttachModule:function(a){d&&(e?l(a):h.push(a))},loadAttachModule:function(a){if(k)for(e=!0,b=a;0<h.length;)a=h.shift(),l(a)},unloadAttachModule:function(){e=!1;b=[]},enableModule:d}});"use strict";
m.when("A").register("attach-preinitiate-checkout",function(a){return{getCartInitiateId:function(){return(new Date).getTime()},preinitiateCheckout:function(c){var h=a.$("#attach-desktop-sideSheet");var b=a.$("#attach_accessory_sheet");h=h.length?h:b;h.find("iframe#checkoutPrefetch").remove();c="/gp/cart/checkout-prefetch.html?\x26cartInitiateId\x3d"+c;b=document.createElement("iframe");b.setAttribute("src",c);b.setAttribute("style","width:0px;height:0px;display:none;position:absolute;");b.setAttribute("name",
"checkoutPrefetch");b.setAttribute("id","checkoutPrefetch");h.append(b)}}});"use strict";m.when("A","attach-common","attach-variant-registration").register("attach-weblabs",function(a,c,h){function b(c){var d=a.$(c).val();c=[];if(d&&0<d.length){d=d.slice(1,-1).split(",");for(var b=0;b<d.length;b++){var e=d[b].trim();0<e.length&&c.push(e)}}return c}var e={},k=e.Selectors={CORE_FREE_SHIPPING_MESSAGE:"#attach-core-free-shipping-message",WEBLABS_TO_TRIGGER_ON_ADD_TO_CART:"#attach-weblabsToTriggerOnAddToCart",
SHOW_ACCESSORY_COUPONS_DSS:"#attach-accessory-coupons-dss",SHOW_ACCESSORY_COUPONS_MBS:"#attach-accessory-coupons-mbs",DEBUG_IS_DEBUG:"#attach-debug-isDebug",DEBUG_QUERY_STRING:"#attach-debug-queryString",ATTACH_MARKETPLACE_ID:"#attach-marketplaceId",WTY_TWISTER_CONTAINER:"#warranty-twister-container",ATTACH_LD_SUPPORT:"#attach-ld-container",WTY_LD_SUPPORT:"#warranty-ld-launch",AAPI_AJAX_ENDPOINT:"#attach-aapi-ajax-endpoint"},d=e.Marketplaces={IN:"A21TJRUUN4KGV"};e.isWarrantyPaneSuppressed=function(){return a.$(k.ATTACH_MARKETPLACE_ID).val()===
d.IN&&(!e.servicesInterstitialDeprecated()||c.hasAccessories())};e.isShowAccessoryCouponsDssEnabled=function(){return c.elementExists(k.SHOW_ACCESSORY_COUPONS_DSS)};e.isShowAccessoryCouponsMbsEnabled=function(){return c.elementExists(k.SHOW_ACCESSORY_COUPONS_MBS)};e.isCoreFreeShippingMessageEnabled=function(){return c.elementExists(k.CORE_FREE_SHIPPING_MESSAGE)};e.isInstallmentsDssIntegrationEnabled=function(){return h.getVariantFlag("DP_INSTALLMENTS_DSS_231673:T1")};e.isAttachDebugParametersEnabled=
function(){return 0<a.$(k.DEBUG_IS_DEBUG).length||0<a.$(k.DEBUG_QUERY_STRING).length};e.isWarrantyTwisterPlusDesktopEnabled=function(){return 0<a.$(k.WTY_TWISTER_CONTAINER).length};e.isAttachLDSupportEnabled=function(){return c.elementExists(k.ATTACH_LD_SUPPORT)};e.isWarrantyLDSupportEnabled=function(){return c.elementExists(k.WTY_LD_SUPPORT)};e.isAmazonApiAjaxEnabled=function(){return c.elementExists(k.AAPI_AJAX_ENDPOINT)};e.isAttachRenderMasonDeprecated=function(){return h.getVariantFlag("ATTACH_RENDER_MASON_DEPRECATION_389180:T1")};
e.isMiniDpMasonDeprecated=function(){return h.getVariantFlag("ATTACH_MINIDP_MASON_DEPRECATION_389181:T1")};e.isSideSheetAccessibilityEnabled=function(){return h.getVariantFlag("ATTACH_ACCESSIBILITY_SIDE_SHEET_391160:T1")};e.servicesInterstitialDeprecated=function(){return c.elementExists("#attachSIDeprecated")};e.getAllWeblabsToTriggerClientSide=function(){return b(k.WEBLABS_TO_TRIGGER_ON_ADD_TO_CART).map(function(a){return a.split(":")})};e.triggerClientSideWeblabs=function(){var a=e.getAllWeblabsToTriggerClientSide();
if(0<a.length)for(var d=0;d<a.length;d++){var c=a[d];r.ue&&ue.count&&ue.count("Attach.ClientSideWeblab."+c[0]+":"+c[1],1);r.ue&&ue.trigger&&ue.trigger(c[0],c[1])}};return e});"use strict";m.when("A").register("attach-logging",function(a){var c={},h,b,e;c.NEXUS={PRODUCER_ID:"atch",ACCESSORY_IMPRESSIONS_PREFIX:"attach.AccessoryImpressions.",ACCESSORY_IMPRESSIONS_SCHEMA_VERSION:"10",ADD_ACCESSORY_PREFIX:"attach.AddAccessoryToCart.",ADD_ACCESSORY_SCHEMA_VERSION:"14",ADD_WARRANTY_PREFIX:"attach.AddWarrantyToCart.",
ADD_WARRANTY_SCHEMA_VERSION:"5",ADD_WARRANTY_FAILURE_PREFIX:"attach.AddWarrantyToCartFailure.",ADD_WARRANTY_FAILURE_SCHEMA_VERSION:"3",WARRANTY_IMPRESSION_PREFIX:"attach.WarrantyImpression.",WARRANTY_IMPRESSION_SCHEMA_VERSION:"6",DSS_WARNING_MESSAGE_PREFIX:"attach.DssWarningMessages.",DSS_WARNING_MESSAGE_VERSION:"2",PROMOTION_CLAIMED_PREFIX:"attach.ClaimPromotion.",PROMOTION_CLAIMED_SCHEMA_VERSION:"2",ACCESSORY_TYPE:{ACCESSORY:"accessory",WARRANTY:"warranty"}};c.FEATURES={DSS:"dss",MBS:"mbs"};c.CSM_METRICS=
{ATTACH_BASE_ATC_CLICK:"attachDesktopBaseATCClick",ATTACH_BASE_ATC_FAILURE:"ATTACH_DSS_ADD_BASE_FAILURE",ATTACH_BASE_ATC_SUCCESS:"ATTACH_DSS_ADD_BASE_SUCCESS",ATTACH_CART_CLICK:"ATTACH_DSS_CART_BUTTON_CLICK",ATTACH_CHECKOUT_CLICK:"ATTACH_DSS_CHECKOUT_CLICK",ATTACH_GET_CART_DESCRIPTION_FAILURE:"ATTACH_DSS_GET_CART_DESCRIPTION_AJAX_FAILURE",ATTACH_GET_CART_DESCRIPTION_SUCCESS:"ATTACH_DSS_GET_CART_DESCRIPTION_AJAX_SUCCESS",ATTACH_SHOW_LESS:"attachDesktopShowLess",ATTACH_SHOW_MORE:"attachDesktopShowMore",
ATTACH_SIDE_SHEET_CLOSE:"attachDesktopSideSheetClose",ATTACH_UPSELL_ATC_CLICK:"attachDesktopUpsellATCClick",ATTACH_UPSELL_ATC_FAILURE:"ATTACH_DSS_ADD_ACCESSORY_FAILURE",ATTACH_UPSELL_ATC_LATENCY:"attach_desktop_upsell_atc_latency",ATTACH_UPSELL_ATC_SUCCESS:"ATTACH_DSS_ADD_ACCESSORY_SUCCESS",MINI_DP_ATC:"attachDesktopMiniDPATC",MINI_DP_BACK:"attachDesktopMiniDPBack",MINI_DP_CANCEL:"attachDesktopMiniDPCancel",MINI_DP_CAROUSEL_THUMBNAIL_CHANGE:"attachDesktopMiniDPCarouselThumbnailChange",MINI_DP_DWELL_TIME:"attach_desktop_mini_dp_dwell_time",
MINI_DP_OPEN:"attachDesktopMiniDPOpen",ATTACH_MBS_BASE_ATC_CLICK:"AttachMbsBaseItemAtcClick",DSS_BASE_LD_ATC_CLICK:"attachDesktopBaseLightningDealAtcClick",MBS_BASE_LD_ATC_CLICK:"attachMobileBaseLightningDealAtcClick",ATTACH_BASE_LD_MISSING_TIMER:"attachBaseLightningDealMissingTimer",ATTACH_BASE_LD_PRESENT:"attachBaseLightningDeal",ATTACH_BASE_LD_WARRANTY_SUCCESS:"attachBaseLightningDealAddWarrantySuccess",ATTACH_BASE_LD_WARRANTY_FAILURE:"attachBaseLightningDealAddWarrantyFailure",ATTACH_BASE_LD_DEAL_STATUS_ERROR:"attachBaseLightningDealStatusError"};
c.ENDPOINTS={REF_TAG_IN:"/hctp/log/refMarker?ref_\x3d"};c.initialize=function(a,d){h=a;b=d;c.REF_TAGS={WARRANTY_IMPRESSION:"dp_atc_"+a+"_w_i_",WARRANTY_ADD_TO_CART:"dp_atc_"+a+"_w_y_"}};c.setPayloadBuilder=function(a){e=function(){var d=a();d.feature=h;d.obfuscatedMarketplaceId=b||r.ue_mid;d.producerId=c.NEXUS.PRODUCER_ID;d.requestId=c.getRandomHexString();return d}};c.getRandomHexString=function(){return Date.now().toString(10)+Math.random().toString(16).substring(2,13)};c.log=function(a,d){r.ue&&
r.ue.event&&r.ue.event(a,c.NEXUS.PRODUCER_ID,d,{ssd:!0})};c.getAccessoryLoggingData=function(c){return{asin:a.$("#attach-accessory-asin-"+(parseInt(c)+1)).val(),index:c,priceFormatted:a.$("#attach-accessory-price-"+c+" \x3e .a-offscreen").text(),priceDecimal:parseFloat(a.$("#attach-accessory-base-price-"+c).val())||null,currencySymbol:a.$("#attach-accessory-base-currency-symbol-"+c).val()||null,couponDecimal:parseFloat(a.$("#attach-accessory-coupon-benefit-amount-"+c).val())||null,couponType:a.$("#attach-accessory-coupon-benefit-type-"+
c).val()||null,dealType:a.$("#attach-accessory-deal-type-"+c).val()||null,dealPercentSavings:parseInt(a.$("#attach-accessory-deal-percent-savings-"+c).val())||null,dealDollarAmount:a.$("#attach-accessory-deal-dollar-savings-"+c).val()||null,categoryIndex:a.$("#attach-accessory-category-index-"+c).val()||null,categoryTitle:a.$("#attach-accessory-category-title-"+c).val()||null,asinIndexWithinCategory:a.$("#attach-accessory-asin-category-index-"+c).val()||null}};c.logAccessoryAddToCart=function(a){var d=
c.NEXUS.ADD_ACCESSORY_PREFIX+c.NEXUS.ADD_ACCESSORY_SCHEMA_VERSION,b=e();b.type=c.NEXUS.ACCESSORY_TYPE.ACCESSORY;b.displayPosition=parseInt(a.index)+1;b.accessoryAsin=a.asin;b.accessoryAsinPrice=a.priceFormatted;b.accessoryItemCurrencySymbol=a.currencySymbol;b.accessoryItemPriceDecimal=a.priceDecimal;b.couponType=a.couponType;b.couponDecimal=a.couponDecimal;b.dealType=a.dealType;b.dealPercentSavings=a.dealPercentSavings;b.dealDollarAmount=a.dealDollarAmount;b.categoryDisplayPosition=parseInt(a.categoryIndex)+
1;b.categoryTitle=a.categoryTitle;b.displayPositionWithinCategory=parseInt(a.asinIndexWithinCategory)+1;c.log(b,d)};c.logAccessoryImpressions=function(a){var d=c.NEXUS.ACCESSORY_IMPRESSIONS_PREFIX+c.NEXUS.ACCESSORY_IMPRESSIONS_SCHEMA_VERSION,b=e();b.accessories=[];for(var k=0;k<a.length;k++){var f=a[k];b.accessories.push({displayPosition:parseInt(f.index)+1,asin:f.asin,price:f.priceFormatted,currencySymbol:f.currencySymbol,priceDecimal:f.priceDecimal,couponType:f.couponType,couponDecimal:f.couponDecimal,
dealType:f.dealType,dealPercentSavings:f.dealPercentSavings,dealDollarAmount:f.dealDollarAmount,categoryDisplayPosition:parseInt(f.categoryIndex)+1,categoryTitle:f.categoryTitle,displayPositionWithinCategory:parseInt(f.asinIndexWithinCategory)+1})}c.log(b,d)};c.logWarrantyAddToCart=function(a,d){var b=c.NEXUS.ADD_WARRANTY_PREFIX+c.NEXUS.ADD_WARRANTY_SCHEMA_VERSION;d&&(b=c.NEXUS.ADD_WARRANTY_FAILURE_PREFIX+c.NEXUS.ADD_WARRANTY_FAILURE_SCHEMA_VERSION);var k=e();k.asin=a.asin;k.price=a.priceFormatted;
k.warrantyCurrencySymbol=a.currencySymbol;k.warrantyPriceDecimal=a.priceDecimal;c.log(k,b);d||c.logWarrantyRefTag(c.REF_TAGS.WARRANTY_ADD_TO_CART,a.asin)};c.logWarrantyImpression=function(a){var d=c.NEXUS.WARRANTY_IMPRESSION_PREFIX+c.NEXUS.WARRANTY_IMPRESSION_SCHEMA_VERSION,b=e();b.asin=a.asin;b.price=a.priceFormatted;b.warrantyCurrencySymbol=a.currencySymbol;b.warrantyPriceDecimal=a.priceDecimal;c.log(b,d);c.logWarrantyRefTag(c.REF_TAGS.WARRANTY_IMPRESSION,a.asin)};c.logWarrantyRefTag=function(a,
d){var b=e().baseAsin;c.logRefTag(a+b+"_"+d)};c.logSecondarySheetRefTag=function(a){var d=e().baseAsin;c.logRefTag(a+"_"+d)};c.logRefTag=function(e){"A21TJRUUN4KGV"===b&&a.get(c.ENDPOINTS.REF_TAG_IN+e)};c.logMobileBaseAtc=function(a){c.logCount(c.CSM_METRICS.ATTACH_MBS_BASE_ATC_CLICK);a&&a.data&&"add-to-cart"===a.data.buttonID&&c.logCount("DetailPage_MobileApp_AddToCart")};c.logMapleError=function(){r.ue&&r.ue.count&&r.ue.count("MAPLE::DSS::Error",(r.ue.count("MAPLE::DSS::Error")||0)+1)};c.logCount=
function(a,c){r.ue&&r.ue.count&&(c=c||1,r.ue.count(a,(r.ue.count(a)||0)+c))};c.logError=function(a,c,b){r.ueLogError&&r.ueLogError(a,{logLevel:c||"ERROR",attribution:b||"DetailPageAttachAssets"})};c.logDSSWarningMessage=function(a){var d=c.NEXUS.DSS_WARNING_MESSAGE_PREFIX+c.NEXUS.DSS_WARNING_MESSAGE_VERSION,b=e();c.log({quantity:b.quantity.toString(),baseAsin:b.baseAsin,warningMessage:a},d)};c.logPromotionClaimed=function(a){var d=c.NEXUS.PROMOTION_CLAIMED_PREFIX+c.NEXUS.PROMOTION_CLAIMED_SCHEMA_VERSION,
b=e();b.asin=a.asin;b.accessoryCurrencySymbol=a.currencySymbol;b.accessoryPriceDecimal=a.priceDecimal;b.displayPosition=a.index+1;null!==a.couponType&&(b.promoDecimal=a.couponDecimal,b.promoDecimalType=a.couponType,b.promoType="coupon");c.log(b,d)};c.isFunction=function(a){return"function"===typeof a};c.beginLatencyCapture=function(a){c.isFunction(r.uet)&&r.uet("bb",a,{wb:1})};c.endLatencyCapture=function(a){c.isFunction(r.uex)&&r.uex("ld",a,{wb:1})};return c});"use strict";m.when("A","attach-logging").register("attach-maple",
function(a,c){var h={},b;h.initialize=function(){b=!1};h.loadBannerHTML=function(){var e=a.$.Deferred(),h={};b&&(h.cart=null);a.post("/gp/cobrandcard/dss-maple-banner.html",{params:h,success:function(a){e.resolve(a)},error:function(){c.logMapleError();e.resolve(null)}});return e.promise()};h.suppressMathBox=function(){b=!0};h.updateMathBox=function(a){"undefined"!==typeof mapleMathBox&&null!==mapleMathBox&&mapleMathBox.updateMapleMath({totalCost:a})};return h});"use strict";m.when("A","attach-variant-registration",
"attach-logging").register("attach-common",function(a,c,h){var b={},e=b.Marketplaces={IN:"A21TJRUUN4KGV"};b.uniqueId=null;b.itemAssocTypeValue="Attach";b.selectedBaseLightningDeal=!1;b.FailureModes={ERROR_500:1,RESUBMIT_BUY_BOX:2,TRANSITION_TO_HUC:3,UNBIND_ATC:4};var k=b.Selectors={ADD_TO_CART_BUTTON:"#add-to-cart-button",ATTACH_MARKETPLACE_ID:"#attach-marketplaceId",DISCRIMINATED_OFFERS_ENABLED:"#attach-discriminated-offers-enabled"};b.buyButton=a.$(k.ADD_TO_CART_BUTTON);b.reject=function(c,e){return b.rejectPromise(a.$.Deferred(),
c,e)};b.rejectPromise=function(c,b,e){if(e&&e.count&&r.ue&&r.ue.count)if("string"===typeof e.count)r.ue.count(e.count,1);else if(a.$.isArray(e.count))for(var d=0;d<e.count.length;d++)r.ue.count(e.count[d],1);return c.reject(b,e)};b.pipeJSON=function(a){try{return JSON.parse(a)}catch(l){return b.reject(null,{count:"ATTACH_DSS_JSON_PARSE_FAILURE"})}};b.unescapeJson=function(a){if(!a)return null;a=a.replace(/\|\|/g,'"');return a=a.replace(/&pipe;/g,"||")};b.elementExists=function(c){return c?c instanceof
a.$?0!==c.length:0!==a.$(c).length:!1};b.moduleExists=function(c){return(c=a.$("#"+c+"_feature_div").html())?0<c.trim().length:!1};b.isCurrencyOfPreferenceApplied=function(){return"true"===a.$("#attach-used-currency-of-preference").val()};b.hasWarranty=function(){return b.elementExists("#attachSIDeprecated")&&b.elementExists("#attach-warranty-pane")||0<a.$("#warrantyEscapedJson").length};b.hasMonthlyWarranty=function(){return b.elementExists("#attach-monthly-warranty")};b.hasAccessories=function(){return b.elementExists("#attach-asin-list")};
b.isDiscriminatedOffersEnabled=function(){return b.elementExists(k.DISCRIMINATED_OFFERS_ENABLED)?"true"===a.$(k.DISCRIMINATED_OFFERS_ENABLED).val():a.$(k.ATTACH_MARKETPLACE_ID).val()===e.IN};b.submitATCForm=function(){var c=b.getAtcForm();h.logCount(h.CSM_METRICS.ATTACH_BASE_ATC_CLICK);c=c.serializeArray();c.push({name:"isDSSAjax",value:"1"});c=a.$.param(c);c=a.$.post("/gp/product/handle-buy-box/ref\x3ddp_start-bbf_1_glance",c);c.fail(function(a){h.logCount(h.CSM_METRICS.ATTACH_BASE_ATC_FAILURE);
h.logError({message:"Base product ATC call failed: "+a.status})});a.trigger("attach:add-base-to-cart",c)};b.getAtcForm=function(){return b.buyButton.closest("form")};b.isAttachMTAWeblabOn=function(){return!0};return b});"use strict";m.when("A","attach-common","attach-logging","attach-baselink","attach-weblabs","attach-variant-registration").register("attach-desktop-warranty-pane",function(a,c,h,b,e,k){var d={name:"warranty"},l=d.Selectors={ASIN:"#attach-warranty-asin",PRICE_FORMATTED:"#attach-accessory-price-warranty",
PRICE_AMOUNT:"#attach-accessory-price-warranty-amount",BASE_ASIN:"#ASIN",MARKETPLACE_ID:"#attach-marketplaceId",BASE_CURRENCY_SYMBOL:"#attach-base-product-currency-symbol",ATC_QUANTITY:"#quantity",ATC_WARRANTY:".attach-warranty-input",JSON_DATA:"#warrantyEscapedJson",PANE:"#attach-warranty-pane",PANE_IMAGE:"#attach-sheet-warranty-image",PANE_UPSELL_IMAGE:"#attach-sheet-warranty-upsell-image",PANE_ADD_BUTTON:"#attachSiAddCoverage",PANE_NO_BUTTON:"#attachSiNoCoverage",PANE_WARRANTY_TITLE:"#attach-warranty-displayTitle",
PANE_EXPERIMENT_DISPLAY:"#attach-warranty-experiment-display",PANE_REGULAR_DISPLAY:"#attach-warranty-display",PANE_LD:"#attach-warranty-pane-ld",PANE_ADD_BUTTON_LD:"#attachSiAddCoverage-ld",PANE_NO_BUTTON_LD:"#attachSiNoCoverage-ld"},r;d.getWarrantyLoggingPayload=function(){var b=a.$(l.ASIN).val(),d=a.$(l.PRICE_FORMATTED),h=a.$(l.PRICE_AMOUNT);return!e.servicesInterstitialDeprecated()&&c.elementExists(h)?{asin:b,priceFormatted:d.text().trim(),priceDecimal:parseFloat(h.val())||null,currencySymbol:a.$(l.BASE_CURRENCY_SYMBOL).val()||
null}:{asin:b,priceFormatted:d.text().trim(),priceDecimal:null,currencySymbol:null}};d.appendWarrantyToATCForm=function(d,h){if(a.$(l.BASE_ASIN).val()&&d&&h){var f=c.getAtcForm();f.append('\x3cinput type\x3d"hidden" id\x3d"useABBHandler" class\x3d"attach-warranty-input" name\x3d"useABBHandler" value\x3d"1" /\x3e');var k=1;e.isWarrantyTwisterPlusDesktopEnabled()&&(k+=1);k=f.find("input[name^\x3d'offeringID']").length+k;var t=a.$(l.ATC_QUANTITY).val()||1,g="quantity."+k,p="asin."+k;f.find('input[name\x3d"'+
g+'"]').remove();f.find('input[name\x3d"'+p+'"]').remove();f.append('\x3cinput type\x3d"hidden" id\x3d"'+g+'" name\x3d"'+g+'" value\x3d"'+t+'" class\x3d"attach-warranty-input" /\x3e');f.append('\x3cinput type\x3d"hidden" id\x3d"'+p+'" name\x3d"'+p+'" value\x3d"'+d+'" class\x3d"attach-warranty-input" /\x3e');f.append('\x3cinput type\x3d"hidden" id\x3d"offeringID.'+k+'" name\x3d"offeringID.'+k+'" value\x3d"'+h+'" class\x3d"attach-warranty-input"/\x3e');d=f.find('input[name\x3d"itemCount"]');0===d.length?
f.append('\x3cinput type\x3d"hidden" name\x3d"itemCount" value\x3d"'+k+'"\x3e'):d[0].value=k;a.$("#atch__bl").length&&b.createBaseLinkFormFields(k+1,f)}};d.clearWarrantyFromATCForm=function(){c.getAtcForm().find(l.ATC_WARRANTY).remove()};d.load=function(b){if(e.servicesInterstitialDeprecated()){if(c.elementExists(l.PANE))a.$(l.PANE).removeClass("aok-hidden");else return c.reject(c.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_WARRANTY_LOAD_FAILURE"});if(e.isAttachLDSupportEnabled()&&e.isWarrantyLDSupportEnabled()&&
c.selectedBaseLightningDeal)if(c.elementExists(l.PANE_LD))a.$(l.PANE+", "+l.PANE_LD).toggleClass("aok-hidden");else return c.reject(c.FailureModes.UNBIND_ATC);c.elementExists(l.PANE_EXPERIMENT_DISPLAY)&&a.$(l.PANE_EXPERIMENT_DISPLAY).remove()}else{if(c.elementExists(l.JSON_DATA)){var f=c.unescapeJson(a.$(l.JSON_DATA).val());f=JSON.parse(f)}return f?d.renderClientSide(b,f):c.reject(c.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_WARRANTY_LOAD_FAILURE"})}};d.renderClientSide=function(c,b){var d=
"",e=b.baseASIN,f="dp_atch_dss_w_lm_"+e+"_"+b.asin,g="dp_atch_dss_w_r_"+e+"_"+b.asin;e="dp_atch_dss_w_lm_"+e+"_"+b.asin;var h=a.$("#stringTranslation-si-warranty-title").val(),q=a.$("#stringTranslation-si-accident-protection").val(),w=a.$("#stringTranslation-si-from").val(),k=a.$("#stringTranslation-si-rating-out-of-5-stars").val(),l=a.$("#stringTranslation-item-added-to-cart").val(),t=a.$("#stringTranslation-desktop-attach-accessory-failed-add-to-cart").val(),F=a.$("#stringTranslation-desktop-attach-accessory-retry").val(),
m=a.$("#stringTranslation-si-add-coverage").val(),r=a.$("#stringTranslation-si-no-thanks").val(),y=a.$("#stringTranslation-services-bundle-detail-link").val();d+='   \x3cdiv id\x3d"attach-warranty-pane" class\x3d"a-section"\x3e\n       \x3cdiv id\x3d"attach-warranty" class\x3d"a-section attach-sidesheet-card"\x3e\n           \x3cinput type\x3d"hidden" name\x3d"" value\x3d"'+b.asin+'" id\x3d"attach-warranty-asin"\x3e\n           \x3ch1 class\x3d"a-size-medium a-spacing-none a-color-base a-text-center"\x3e'+
h+'\x3c/h1\x3e\n           \x3chr class\x3d"a-spacing-base a-spacing-top-small a-divider-normal attach-warranty-divider"\x3e\n           \x3cdiv class\x3d"a-row a-spacing-micro"\x3e\n';null!==b.thumbImage&&(d+='                \x3cdiv class\x3d"a-column a-span2"\x3e\n                    \x3cimg id\x3d"attach-sheet-warranty-image" src\x3d"" data-image-url\x3d"'+b.thumbImage+'" class\x3d"attach-accessory-image"\x3e\n                \x3c/div\x3e\n');d+='                \x3cdiv class\x3d"a-column a-span10 a-span-last"\x3e\n                    \x3ca class\x3d"a-size-large a-spacing-micro a-link-normal a-color-base" id\x3d"attach-warranty-displayTitle" target\x3d"_blank" rel\x3d"noopener" href\x3d"/dp/'+
b.asin+"/ref\x3d"+f+'"\x3e\n                        \x3cstrong\x3e'+(null!==b.displayTitle?b.displayTitle:q.replace("${brandName}",b.brandName))+'\x3c/strong\x3e\n                    \x3c/a\x3e\n                    \x3cbr\x3e\n                    \x3cspan class\x3d"a-size-base a-color-secondary"\x3e'+w+" "+b.merchantName+"\x3c/span\x3e\n";Number(b.averageRating)&&Number(b.numReviews)&&Number(b.numFullStars)&&"boolean"===typeof b.hasHalfStar&&(f=k.replace("${averageRating}",b.averageRating),d+='                    \x3cdiv class\x3d"a-icon-row a-spacing-micro"\x3e\n                        \x3ca class\x3d"a-link-normal" href\x3d"/product-reviews/'+
b.asin+"/ref\x3d"+g+'?ie\x3dUTF8\x26amp;showViewpoints\x3d1"\x3e\n                            \x3ci class\x3d"a-icon a-icon-star a-star-'+b.numFullStars+(b.hasHalfStar?"-5":"")+'"\x3e\x3cspan class\x3d"a-icon-alt"\x3e'+f+'\x3c/span\x3e\x3c/i\x3e\n                        \x3c/a\x3e\n                        \x3ca class\x3d"a-link-normal" href\x3d"/product-reviews/'+b.asin+"/ref\x3d"+g+'?ie\x3dUTF8\x26amp;showViewpoints\x3d1"\x3e\n                            '+b.numReviews+"\n                        \x3c/a\x3e\n                    \x3c/div\x3e\n");
null!==b.buyingPriceAmount&&(d+='                    \x3cinput id\x3d"attach-accessory-price-warranty-amount" type\x3d"hidden" value\x3d"'+b.buyingPriceAmount+'"\x3e\n');d+='                    \x3cspan id\x3d"attach-accessory-price-warranty" class\x3d"a-size-large a-color-base attach-warranty-price"\x3e'+b.formattedBuyingPrice+'\x3c/span\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"a-row"\x3e\n                \x3cdiv class\x3d"a-column a-span12"\x3e\n                    \x3cdiv id\x3d"warrantyBulletRowWrapper" class\x3d"a-section"\x3e\n                        \x3cdiv class\x3d"a-row a-spacing-micro"\x3e\n                            \x3cul class\x3d"a-unordered-list a-vertical a-spacing-none"\x3e\n';
for(g=0;g<b.bulletPoints.length;g++)d+='                                \x3cli\x3e\x3cspan class\x3d"a-list-item"\x3e'+b.bulletPoints[g].text+"\x3c/span\x3e\x3c/li\x3e\n";d+='                            \x3c/ul\x3e\n                        \x3c/div\x3e\n                        \x3cdiv id\x3d"attachWarrantyButtonWrapper" class\x3d"a-section a-box-inner a-color-alternate-background"\x3e\n                            \x3cdiv id\x3d"attachWarrantyButtonInnerWrapper" class\x3d"a-section a-box-inner"\x3e\n                                \x3cdiv id\x3d"attach_add_accessory_alert_warranty" class\x3d"a-box a-alert-inline a-alert-inline-success aok-hidden attach_add_accessory_alert"\x3e\n                                    \x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\n                                        \x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e\n                                        \x3cdiv class\x3d"a-alert-content"\x3e\n                                            \x3cspan class\x3d"a-size-base a-color-success"\x3e'+
l+'\x3c/span\x3e\n                                        \x3c/div\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                                \x3cdiv id\x3d"attach_add_accessory_error_warranty" class\x3d"a-box a-alert-inline a-alert-inline-error aok-hidden attach_add_accessory_alert" aria-live\x3d"assertive" role\x3d"alert"\x3e\n                                    \x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\n                                        \x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e\n                                        \x3cdiv class\x3d"a-alert-content"\x3e\n                                            \x3cspan class\x3d"a-size-base"\x3e\n                                                '+
t+'\x3cbr\x3e\n                                            \x3c/span\x3e\n                                            \x3ca class\x3d"a-link-normal attach-add-to-cart-retry" href\x3d"#"\x3e\n                                                '+F+'\n                                            \x3c/a\x3e\n                                        \x3c/div\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                                \x3cspan class\x3d"attach_add_accessory_spinner_warranty a-spinner a-spinner-small attach-spinner aok-hidden"\x3e\x3c/span\x3e\n                                \x3cdiv class\x3d"a-section attach-warranty-button-row"\x3e\n                                    \x3cdiv class\x3d"a-button-stack"\x3e\n                                        \x3cspan id\x3d"attachSiAddCoverage" class\x3d"a-button a-button-primary attach-si-add-client"\x3e\n                                            \x3cspan class\x3d"a-button-inner"\x3e\n                                                \x3cbutton id\x3d"attachSiAddCoverage-announce" data-asin\x3d"'+
b.asin+'" data-offering-id\x3d"'+b.oid+'" class\x3d"a-button-text" type\x3d"button"\x3e\n                                                    '+m+'\n                                                \x3c/button\x3e\n                                            \x3c/span\x3e\n                                        \x3c/span\x3e\n                                        \x3cspan id\x3d"attachSiNoCoverage" class\x3d"a-button"\x3e\n                                            \x3cspan class\x3d"a-button-inner"\x3e\n                                                \x3cbutton id\x3d"attachSiNoCoverage-announce" class\x3d"a-button-text" type\x3d"button"\x3e\n                                                    '+
r+'\n                                                \x3c/button\x3e\n                                            \x3c/span\x3e\n                                        \x3c/span\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                            \x3c/div\x3e\n                        \x3c/div\x3e\n                    \x3c/div\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n            \x3ca class\x3d"a-link-normal" target\x3d"_blank" rel\x3d"noopener" href\x3d"/dp/'+
b.asin+"/ref\x3d"+e+'"\x3e\n                '+y+"\n            \x3c/a\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n";c.$container.append(d)};d.onAttachAddBaseToCart=function(a){a.always(d.clearWarrantyFromATCForm)};d.setup=function(f){d.sheet=f;a.$(l.PANE).hide();var k=a.$(l.PANE_IMAGE).attr("data-image-url");a.$(l.PANE_IMAGE).attr("src",k);a.$(l.PANE_ADD_BUTTON).click(function(){var b=a.$(this).find("button");e.servicesInterstitialDeprecated()&&(b=a.$(this).find("[data-asin]"));var k=b.attr("data-asin");
b=b.attr("data-offering-id");d.appendWarrantyToATCForm(k,b);h.logWarrantyAddToCart(d.getWarrantyLoggingPayload());e.servicesInterstitialDeprecated()&&!c.hasAccessories()||c.submitATCForm();f.next()});a.$(l.PANE_NO_BUTTON).click(function(){e.servicesInterstitialDeprecated()&&!c.hasAccessories()||c.submitATCForm();f.next()});e.isAttachLDSupportEnabled()&&e.isWarrantyLDSupportEnabled()&&(a.$(l.PANE_ADD_BUTTON_LD).click(function(){b.obtainBaseItemCartId(function(c){var e=a.$(l.PANE_ADD_BUTTON_LD).find("input");
c={warrantyAsin:e.attr("data-asin"),offeringId:e.attr("data-offering-id"),addWarranty:1,quantity:1,baseItemCartId:c};b.addLinkedWarranty(c,function(){h.logCount(h.CSM_METRICS.ATTACH_BASE_LD_WARRANTY_SUCCESS);new Promise(d.updateCart);a.$("#attach-sheet-warranty-image").clone().removeAttr("class").removeAttr("id").attr("alt","warranty image").appendTo("#attach-ld-image-container");f.next()},function(){h.logCount(h.CSM_METRICS.ATTACH_BASE_LD_WARRANTY_FAILURE);f.next()})})}),a.$(l.PANE_NO_BUTTON_LD).click(function(){f.next()}));
a.off("attach:add-base-to-cart",d.onAttachAddBaseToCart);a.on("attach:add-base-to-cart",d.onAttachAddBaseToCart)};d.show=function(){c.selectedBaseLightningDeal?e.isAttachLDSupportEnabled()&&e.isWarrantyLDSupportEnabled()&&c.selectedBaseLightningDeal&&a.$(l.PANE_LD).show():a.$(l.PANE).removeClass("aok-hidden");a.$(l.PANE).fadeIn(400,d.setFocus);h.logWarrantyImpression(d.getWarrantyLoggingPayload());r=Date.now();e.isSideSheetAccessibilityEnabled()&&m.when("attach.utilities.focus-management").execute(function(c){a.$(l.PANE).find("h1").first().attr("id",
"attach-warranty-header");d.sheet.$container.attr("aria-labelledby","attach-warranty-header");c.focusDescendant(a.$(l.PANE).get(0),"first")})};d.hide=function(){a.$(l.PANE+", "+l.PANE_LD).fadeOut();h.logCount(h.CSM_METRICS.WARRANTIES_DWELL_TIME,Math.floor((Date.now()-r)/1E3))};d.setFocus=function(){a.$(l.PANE_WARRANTY_TITLE).get(0).focus()};d.updateCart=function(){a.$.get("/gp/navigation/ajax/dynamic-menu.html?cartItems\x3dcart").done(function(a){a&&a.cartItems&&a.cartItems.count&&m.when("nav.setCartCount").execute(function(c){c(a.cartItems.count)})})};
return d});"use strict";m.when("A","attach-common","attach-weblabs","attach-maple","attach-logging","attach-variant-registration").register("attach-desktop-accessories-pane",function(a,c,h,b,e,k){var d={name:"accessories"},l=!0,y=!1,f,t=!1,u=!1,v,n=d.Endpoints={RENDER_GXA:"/gp/product/ajax?experienceId\x3dattach",RENDER:"/gp/product/features/aloha-ppd/udp-ajax-handler/attach-render-desktop.html",GET_CART_DESCRIPTION:"/gp/product/features/aloha-ppd/udp-ajax-handler/attach-get-cart-description.html",
ADD_ACCESSORY_TO_CART:"/gp/product/features/aloha-ppd/udp-ajax-handler/attach-add-to-cart.html",PROCEED_TO_CHECKOUT:"/gp/cart/desktop/go-to-checkout.html?proceedToCheckout\x3dProceed"},g=d.Selectors={BASE_ASIN:"#attach-baseAsin",QUANTITY:"#quantity",ACCESSORY_ASIN_LIST:"#attach-asin-list",MARKETPLACE_ID:"#attach-marketplaceId",LANGUAGE_OF_PREFRENCE:"#attach-languageOfPreference",PANE:"#attach-accessory-pane",PANE_CLOSE_BUTTON:"#attach-close_sideSheet-link",PANE_CART_BASE_ALERT_IMAGE_AREA:"#attach-added-to-cart-alert-and-image-area",
PANE_CART_BASE_ALERT:"#attachDisplayAddBaseAlert",PANE_CART_BASE_SUCCESS_ALERT:"#attachAddBaseItemSuccessAlert",PANE_CART_BASE_ERROR_ALERT:"#attachAddBaseItemErrorAlert",PANE_CART_BASE_INITIAL_IMAGE:"#attach-sheet-view-base-product-image",PANE_CART_BASE_HUC_IMAGE:".huc-image-wrapper",PANE_CART_BLOCK:".attach-primary-atc-confirm-box",PANE_CART_BLOCK_INNER:"#attach-added-to-cart-message",PANE_CART_BLOCK_SUBTOTAL_LABEL:"#attach-accessory-cart-total-string",PANE_CART_BLOCK_SUBTOTAL_PRICE:"#attach-accessory-cart-subtotal",
PANE_CART_BLOCK_CORE_FREE_SHIPPING_MESSAGE:"#attach-core-free-shipping-message",PANE_CART_BLOCK_PROCEED_TO_CHECKOUT:"#attach-accessory-proceed-to-checkout-text",PANE_CART_SPINNER:"#attach-add-to-cart-message-spinner",PANE_VIEW_CART_BUTTON:"#attach-sidesheet-view-cart-button",PANE_CHECKOUT_BUTTON:"#attach-sidesheet-checkout-button",PANE_HUC_MESSAGE:".attach-add-to-cart-message-card",PANE_ACCESORIES_CARD:"#attach-accessories",PANE_CATEGORIZED_ACCESSORIES_TILES_CARD:"#attach-categorized-accessories-tiles",
PANE_ACCESSORY_RETRY_BUTTON:".attach-add-to-cart-retry",PANE_ACCESSORY_ADD_DECLARATIVES:'.a-declarative[data-action\x3d"attach-accessory-add"]',PANE_ACCESSORY_IMAGE:".attach-accessory-image",PANE_ACCESSORY_ASIN:".attach-accessory-asin",PANE_ACCESSORY_ADD_BUTTON_PREFIX:"#attach_add_accessory_button_",PANE_ACCESSORY_ADD_SPINNER_PREFIX:"#attach_add_accessory_spinner_",PANE_ACCESSORY_ADD_SUCCESS_PREFIX:"#attach_add_accessory_alert_",PANE_ACCESSORY_ADD_ERROR_PREFIX:"#attach_add_accessory_error_",PANE_ACCESSORY_FIRST_ASIN:"#attach_accessory_dp_1",
PANE_CATEGORIZED_ACCESSORIES_CARD:"#attach-categorized-accessories",PANE_ACCESSORY_TITLE:".attach-accessory-title",PANE_ACCESSORY_TILE_ITEM:".attach-accessory-tile",PANE_ACCESSORY_TILE_ITEM_PREFIX:"#attach-accessory-tile-",PANE_ACCESSORY_CAROUSEL:"#attach-accessories .a-carousel-container",PANE_ACCESSORY_CARD:"#attach-accessories.card-expandable",PANE_ACCESSORY_CARD_SEE_MORE:".card-toggle-see-more",PANE_ACCESSORY_CARD_SEE_LESS:".card-toggle-see-less",PANE_ACCESSORY_CARD_PEEK_CONTENT:".card-peek-content",
PANE_ACCESSORY_CARD_EXPAND_CONTENT:".card-expand-content",PANE_MAPLE_SLOT:"#maple-dss-slot",PANE__DATA_CATEGORY_VIEW:"categoryView",PANE__DATA_ASIN_INDEX:"asinindex",PANE_ACCESSORY_COUPON:".attach-accessory-coupon",PANE_ACCESSORY_COUPON_PREFIX:"#attach-accessory-coupon-",PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS:".attach-coupon-unclipped",PANE_ACCESSORY_COUPON_CLIPPED_CLASS:".attach-coupon-clipped",PANE_ACCESSORY_COUPON_ERROR_CLASS:".attach-coupon-error",PANE_ACCESSORY_COUPON_BADGE_CLASS:".attach-coupon-short-badge",
PANE_ACCESSORY_COUPON_BADGE_UNCLIPPED_CLASS:".attach-coupon-badge-unclipped",PANE_ACCESSORY_COUPON_BADGE_CLIPPED_CLASS:".attach-coupon-badge-clipped",PANE_ACCESSORY_LIGHTNING_DEAL:".attach-accessory-lightning-deal",PANE_ACCESSORY_LIGHTNING_DEAL_PREFIX:"#attach-accessory-lightning-deal-",PANE_ACCESSORY_LIGHTNING_DEAL_JOIN_WAITLIST_PREFIX:"#attach-accessory-deal-on-waitlist-",PANE_ACCESSORY_CSRF_TOKEN:"#attach-accessory-deal-csrf-token",DEBUG_IS_DEBUG:"#attach-debug-isDebug",DEBUG_QUERY_STRING:"#attach-debug-queryString"},
p=d.AccessoryAddStatus={INITIAL:0,ADDING:1,SUCCESS:2,ERROR:3};d.setShouldIncludeMaple=function(a){y=a};d.load=function(d){m.now("attach-external-atc-interceptor").execute(function(a){f=a});a.trigger("LOADED_ACCESSORIES_PANE_SUCCESSFULLY");var q=a.$.Deferred();m.now("dp-util-cookie").execute(function(b){b&&b("session-id")!==a.$("#attach-sessionId").val()&&c.rejectPromise(q,c.FailureModes.TRANSITION_TO_HUC,{count:"ATTACH_DSS_INVALID_SESSION_ID",information:"Unexpected session ID received; expected "+
a.$("#attach-sessionId").val()+" but cookie value was "+b("session-id")})});if(h.isAttachRenderMasonDeprecated())var k=a.$.get(n.RENDER_GXA,{asin:a.$(g.BASE_ASIN).val()});else k={attachAccessoryAsinList:a.$(g.ACCESSORY_ASIN_LIST).val(),marketplaceId:a.$(g.MARKETPLACE_ID).val(),asin:a.$(g.BASE_ASIN).val(),deviceType:"desktop",attachWeblabsToTrigger:[]},h.isAttachDebugParametersEnabled()&&(k.isDebug=a.$(g.DEBUG_IS_DEBUG).val(),k.queryString=a.$(g.DEBUG_QUERY_STRING).val()),k=a.$.param(k,!0),k=a.$.post(n.RENDER,
k);if(y){c.isCurrencyOfPreferenceApplied()&&b.suppressMathBox();var l=b.loadBannerHTML()}a.$.when(k,l).done(function(b,f){var w=a.$(b[0].trim()),h=!w.is(g.PANE);w=0===w.find(g.PANE_ACCESSORY_ASIN).length;h||w?c.rejectPromise(q,c.FailureModes.TRANSITION_TO_HUC,{count:["ATTACH_DSS_RENDER_FAILURE","ATTACH_DSS_RENDER_FAILURE_INVALID_HTML"],information:"Failed to render DSS: isPaneMissing\x3d"+h+" isEmptyAccessoryList\x3d"+w}):(d.$container.append(a.$(b[0]).get(0)),f&&0<f.trim().length&&(f=a.$(f),b=f.not("script"),
f=f.filter("script"),c.elementExists(g.PANE_CATEGORIZED_ACCESSORIES_TILES_CARD)?b.insertAfter(g.PANE_CATEGORIZED_ACCESSORIES_TILES_CARD):b.insertAfter(g.PANE_ACCESORIES_CARD),b.wrap('\x3cdiv id\x3d"maple-dss-slot"\x3e\x3cdiv id\x3d"maple-dss-card" class\x3d"a-section attach-sidesheet-card"\x3e\x3c/div\x3e\x3c/div\x3e'),f.each(function(){a.$.globalEval(this.innerHTML)}),e.logCount("ATTACH_DSS_MAPLE_RENDERED")),q.resolve())}).fail(function(){c.rejectPromise(q,c.FailureModes.TRANSITION_TO_HUC,{count:"ATTACH_DSS_RENDER_FAILURE",
information:"Failed to render DSS: network request failed"})});return q.promise()};d.onAttachAddBaseToCart=function(a){l=!1;a.pipe(d.handleAddBaseAndGetCartDescription).pipe(c.pipeJSON).pipe(d.handleCartDescription).fail(function(a,b){d.sheet.fail(a||c.FailureModes.ERROR_500,b)})};d.runOnceSetup=function(){t||(t=!0,a.declarative("attach-accessory-add","click",function(c){var b=c.$currentTarget,q=c.data,f=q.a,h=q.oid;q=q.isLightningDeal;e.logCount(e.CSM_METRICS.ATTACH_UPSELL_ATC_CLICK);e.beginLatencyCapture(e.CSM_METRICS.ATTACH_UPSELL_ATC_LATENCY);
c=!0===a.$(g.PANE_CATEGORIZED_ACCESSORIES_CARD).data(g.PANE__DATA_CATEGORY_VIEW)?a.$(c.$target).data(g.PANE__DATA_ASIN_INDEX):a.$(g.PANE_ACCESSORY_ADD_DECLARATIVES).index(b);q?d.addAccessoryToCartWithLightningDeal(c):d.addAccessoryToCart(f,h,c)}))};d.setup=function(c){d.runOnceSetup();a.$(g.PANE).hide();d.sheet=c;a.off("attach:add-base-to-cart",d.onAttachAddBaseToCart);a.on("attach:add-base-to-cart",d.onAttachAddBaseToCart);a.$(g.PANE_VIEW_CART_BUTTON).click(d.viewCart);a.$(g.PANE_CHECKOUT_BUTTON).click(d.proceedToCheckout);
a.$(g.PANE_ACCESSORY_RETRY_BUTTON).click(function(){var c=a.$(this).attr("data-asin"),b=a.$(this).attr("data-oid"),q=a.$(this).attr("data-idx");d.addAccessoryToCart(c,b,q)});a.$(g.PANE).find(g.PANE_CLOSE_BUTTON).appendTo(g.PANE_CART_BLOCK);a.$(g.PANE_CLOSE_BUTTON).click(c.next);a.$(g.PANE_ACCESSORY_IMAGE).each(function(){a.$(this).attr("src",a.$(this).attr("data-image-url"))});h.isShowAccessoryCouponsDssEnabled()&&d.initializeCoupons();a.$(g.PANE_ACCESSORY_LIGHTNING_DEAL).each(function(){var c=a.$(this).data().idx;
d.updateLightningDealTimer(c);d.initializeLightningDealStatusRefresher(c)})};d.show=function(){h.isAttachLDSupportEnabled()&&c.selectedBaseLightningDeal||!l||c.submitATCForm();v=Date.now();a.$(g.PANE).css({opacity:0}).show().animate({opacity:1},500,"linear",d.setFocus);if(h.isAttachLDSupportEnabled()&&c.selectedBaseLightningDeal)a.$(g.PANE_CART_BLOCK).addClass("aok-hidden"),a.$("#attach-accessory-pane").css("height",a.$(r).height()-161);else{var b=a.$(g.PANE_CART_BLOCK_INNER);b.find("div").addClass("aok-hidden");
b.append(a.$(g.PANE_CART_SPINNER).removeClass("aok-hidden"))}d.initializeAccessoriesDisplay();m.now("attach-categorized-cards").execute(function(a){a!==B&&a.initializeCategorizedCards()})};d.hide=function(){a.$(g.PANE).hide();a.$(g.PANE_CART_SPINNER).addClass("aok-hidden");a.$(g.PANE_HUC_MESSAGE).remove();a.$(g.PANE_ACCESSORY_ASIN).each(function(c,b){(b=a.$(b).data(g.PANE__DATA_ASIN_INDEX))&&(c=b);d.updateAccessoryStatus(c,p.INITIAL)});a.trigger("RESET_SECONDARY_SIDE_SHEET_MODULE");f&&f.unloadAttachModule();
e.logCount(e.CSM_METRICS.ACCESSORIES_DWELL_TIME,Math.floor((Date.now()-v)/1E3));a.trigger("aloha:detailPage:reappear");l=!0};d.setFocus=function(){a.$(g.PANE_ACCESSORY_FIRST_ASIN).length&&a.$(g.PANE_ACCESSORY_FIRST_ASIN).get(0).focus()};d.viewCart=function(){e.logCount(e.CSM_METRICS.ATTACH_CART_CLICK);document.location=""};d.proceedToCheckout=function(){e.logCount(e.CSM_METRICS.ATTACH_CHECKOUT_CLICK);document.location=u?n.PROCEED_TO_CHECKOUT+"\x26cartInitiateId\x3d"+u+"\x26ref_\x3ddp_atch_dss_proceed":
n.PROCEED_TO_CHECKOUT+"\x26ref_\x3ddp_atch_dss_proceed"};d.updateNavCartDisplayQuantity=function(c){var b=Number(c);c=isNaN(b)?"":100>b?c:"99+";a.$("#nav-cart-count").toggleClass("nav-cart-0",0===b).toggleClass("nav-cart-1",1<=b&&10>b).toggleClass("nav-cart-10",10<=b&&20>b).toggleClass("nav-cart-20",20<=b&&100>b).toggleClass("nav-cart-100",100<=b).text(c)};d.handleAddBaseAndGetCartDescription=function(b){e.logCount(e.CSM_METRICS.ATTACH_BASE_ATC_SUCCESS);b=a.$(b);d.renderHUCFeedback(b);d.renderBaseAddStatusIcon(b);
if(f)try{var q=a.$(g.PANE_ACCESSORY_ASIN).map(function(){return this.value}).get();f.loadAttachModule(q)}catch(A){m.logError(A,"Could not update ABB/DSS external interceptor: ","ERROR","attach-desktop-accessories-pane")}h.isSideSheetAccessibilityEnabled()&&m.when("attach.utilities.focus-management").execute(function(c){d.sheet.$container.attr("aria-labelledby","attachDisplayAddBaseAlert");c.focusDescendant(a.$(g.PANE).get(0),"first")});q={marketplaceId:a.$(g.MARKETPLACE_ID).val(),asin:a.$(g.BASE_ASIN).val(),
languageOfPreference:a.$(g.LANGUAGE_OF_PREFRENCE).val(),customerId:a.$("#attach-customerId").val(),sessionId:a.$("#attach-sessionId").val()};return a.$.post(n.GET_CART_DESCRIPTION,q).pipe(null,function(a,b,d){m.logError(Error(b),"AJAX cart description call failed: ","ERROR","attach-desktop-accessories-pane");return c.reject(null,{count:e.CSM_METRICS.ATTACH_GET_CART_DESCRIPTION_FAILURE})})};d.handleCartDescription=function(q){try{var f=isNaN(parseInt(q.totalPrice)),k=isNaN(parseInt(q.itemQuantity)),
l=!a.$.isArray(q.includedAsins),p=0===q.formattedTotalPrice.trim().length,t=0===q.cartSubtotalString.trim().length,n=0===q.itemQuantityString.trim().length,r=f||k||l;p||t||n;if(r)throw Error("Received invalid cart description: hasInvalidCartTotalPrice\x3d"+f+" hasInvalidCartItemQuantity\x3d"+k+" hasInvalidCartIncludedAsins\x3d"+l+" hasInvalidCartFormattedTotalPrice\x3d"+p+" hasInvalidCartSubtotal\x3d"+t+" hasInvalidCartQuantity\x3d"+n);d.updateNavCartDisplayQuantity(q.itemQuantity);a.$(g.PANE_CART_BLOCK_SUBTOTAL_LABEL).html(q.cartSubtotalString);
a.$(g.PANE_CART_BLOCK_SUBTOTAL_PRICE).html(q.formattedTotalPrice);a.$(g.PANE_CART_BLOCK_PROCEED_TO_CHECKOUT).html(q.itemQuantityString);a.$("#attach-customerId").val()&&m.when("attach-preinitiate-checkout").execute(function(a){u=a.getCartInitiateId();a.preinitiateCheckout(u)});q.coreFreeShippingMessage&&a.$(g.PANE_CART_BLOCK_CORE_FREE_SHIPPING_MESSAGE).html(q.coreFreeShippingMessage);y&&b.updateMathBox(Number(q.totalPrice));h.isAttachLDSupportEnabled()&&c.selectedBaseLightningDeal||(a.$(g.PANE_CART_BLOCK_INNER).find("div").removeClass("aok-hidden"),
a.$(g.PANE_CART_SPINNER).addClass("aok-hidden"));setTimeout(d.revealHUCFeedback,200);m.when("EWC").execute(function(a){a.refresh()});e.logCount(e.CSM_METRICS.ATTACH_GET_CART_DESCRIPTION_SUCCESS);return q}catch(E){return m.logError(E,"Could not process the cart description: ","ERROR","attach-desktop-accessories-pane"),c.reject(null,{count:"ATTACH_DSS_HANDLE_CART_DESCRIPTION_FAILURE"})}};d.updateAccessoryStatus=function(c,b){a.$(g.PANE_ACCESSORY_ADD_BUTTON_PREFIX+c).toggleClass("aok-hidden",b!==p.INITIAL);
a.$(g.PANE_ACCESSORY_ADD_SPINNER_PREFIX+c).toggleClass("aok-hidden",b!==p.ADDING);a.$(g.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+c).toggleClass("aok-hidden",b!==p.SUCCESS);a.$(g.PANE_ACCESSORY_ADD_ERROR_PREFIX+c).toggleClass("aok-hidden",b!==p.ERROR);a.$("#tile-add-accessory-badge-"+c).toggleClass("aok-hidden",b!==p.SUCCESS);a.$("#attach-accessory-tile-"+c).toggleClass("in-cart",b===p.SUCCESS)};d.addAccessoryToCart=function(b,f,h){f={marketplaceId:a.$(g.MARKETPLACE_ID).val(),asin:a.$(g.BASE_ASIN).val(),
customerId:a.$("#attach-customerId").val(),sessionId:a.$("#attach-sessionId").val(),accessoryItemAsin:b,accessoryItemOfferingId:f,languageOfPreference:a.$(g.LANGUAGE_OF_PREFRENCE).val(),accessoryItemQuantity:a.$(g.QUANTITY).val(),accessoryItemPrice:a.$("#attach-accessory-base-price-"+h).val(),accessoryMerchantId:a.$("#attach-accessory-merchantId-"+h).val(),accessoryProductGroupId:a.$("#attach-accessory-product-category-code-"+h).val()};if(c.isDiscriminatedOffersEnabled()){var q={};q=c.isAttachMTAWeblabOn()?
{itemAssociationGroup:'{"parentAsin":"'+f.asin+'","type":"Attach","renderType":"renderAll","constraintList":[{"mutuallyInclusive":false,"type":"DELETE"}]}'}:{itemAssoc:c.uniqueId,itemAssocType:c.itemAssocTypeValue,itemAssocRenderType:"renderAll"};f.keyValuePairs=JSON.stringify(q)}d.updateAccessoryStatus(h,p.ADDING);a.$.post(n.ADD_ACCESSORY_TO_CART,f).pipe(c.pipeJSON).pipe(d.handleCartDescription).pipe(function(q){if(-1===a.$.inArray(b,q.includedAsins))return c.reject(null,{count:"ATTACH_DSS_ADD_ACCESSORY_NOT_IN_CART"});
d.updateAccessoryStatus(h,p.SUCCESS);e.logAccessoryAddToCart(d.getAccessoryLoggingData(h));e.logCount(e.CSM_METRICS.ATTACH_UPSELL_ATC_SUCCESS);a.trigger("UPSELL_ASIN_ADDED_TO_CART",h);m.when("EWC").execute(function(a){a.refresh()})}).fail(function(){e.logCount(e.CSM_METRICS.ATTACH_UPSELL_ATC_FAILURE);d.updateAccessoryStatus(h,p.ERROR);a.trigger("UPSELL_ASIN_NOT_ADDED_TO_CART",h)})};d.addAccessoryToCartWithLightningDeal=function(b){d.updateAccessoryStatus(b,p.ADDING);var q=a.$("#attach-accessory-claim-deal-url-"+
b).val(),f=a.$("#attach-accessory-claim-deal-params-"+b).val();if(q&&f){f=JSON.parse(c.unescapeJson(f));f.clientId="attach";var h=a.$(g.PANE_ACCESSORY_CSRF_TOKEN).val();a.$.ajax({type:"POST",url:q,data:f,headers:{"X-CSRFToken":h}}).pipe(function(q){var f=q.dealItemStatus&&q.dealItemStatus.customerState;if("1"!==q.isClaimed&&"INWAITLIST"!==f)return c.reject(null,{count:"ATTACH_DSS_ADD_ACCESSORY_NOT_IN_CART"});"INWAITLIST"===f?a.$(g.PANE_ACCESSORY_ADD_SPINNER_PREFIX+b).addClass("aok-hidden"):d.updateAccessoryStatus(b,
p.SUCCESS);e.logAccessoryAddToCart(d.getAccessoryLoggingData(b));e.logCount(e.CSM_METRICS.ATTACH_UPSELL_ATC_SUCCESS);q=q.dealItemStatus&&q.dealItemStatus.msToCustomerStateExpiry;d.handleLightningDealAddToCart(b,q?q:900,f);a.trigger("UPSELL_ASIN_ADDED_TO_CART",b);m.when("EWC").execute(function(a){a.refresh()});f={marketplaceId:a.$(g.MARKETPLACE_ID).val(),asin:a.$(g.BASE_ASIN).val(),customerId:a.$("#attach-customerId").val(),sessionId:a.$("#attach-sessionId").val(),languageOfPreference:a.$(g.LANGUAGE_OF_PREFRENCE).val(),
isLightningDeal:!0};a.$.post(n.GET_CART_DESCRIPTION,f).pipe(c.pipeJSON).pipe(d.handleCartDescription)}).fail(function(){e.logCount(e.CSM_METRICS.ATTACH_UPSELL_ATC_FAILURE);d.updateAccessoryStatus(b,p.ERROR);a.trigger("UPSELL_ASIN_NOT_ADDED_TO_CART",b)})}};d.revealHUCFeedback=function(){var b=a.$(g.PANE_HUC_MESSAGE);if(b.hasClass("aok-hidden")){b.css({position:"absolute",top:0}).removeClass("aok-hidden");var c=b.children().height();0<c&&b.css({marginTop:-1*(c+4)+"px",position:"initial"}).animate({marginTop:"14px"},
800)}};d.renderHUCFeedback=function(b){var d=b.find("#hlb-ship-message");b=a.$().add(b.find("#huc-v2-message-group")).add(b.find("#hlb-imb"));h.isCoreFreeShippingMessageEnabled()&&c.elementExists(d)&&a.$(g.PANE_CART_BLOCK_CORE_FREE_SHIPPING_MESSAGE).html(d.html());0<b.length&&(d=a.$("\x3cdiv class\x3d'attach-sidesheet-card attach-add-to-cart-message-card aok-hidden'\x3e\x3c/div\x3e"),d.append(b),d.insertAfter(g.PANE_CART_BLOCK),d.find(".a-declarative a").unwrap(),d.find(".a-declarative span").removeClass("a-color-link huc-cursor-pointer").unwrap(),
d.find(".sc-action-quantity").hide(),(d=b.find(".a-alert-heading").text())&&e.logDSSWarningMessage(d))};d.renderBaseAddStatusIcon=function(b){var d;c.elementExists(b.find("#huc-v2-order-row-confirm-text"))?d=b.find("#huc-v2-order-row-confirm-text").hasClass("a-color-error"):c.elementExists(b.find("#hl-confirm-text"))&&(d=b.find("#hl-confirm-text").hasClass("a-alert-warning"));d=(d?a.$(g.PANE_CART_BASE_ERROR_ALERT):a.$(g.PANE_CART_BASE_SUCCESS_ALERT)).clone().prop("id","attachDisplayAddBaseAlert");
a.$(g.PANE_CART_BASE_ALERT).remove();a.$(g.PANE_CART_BASE_ALERT_IMAGE_AREA).prepend(d);d=b.find(".huc-v2-order-row-image").clone();c.elementExists(d)||(d=b.find(".hlb-product-image").clone());if(1<d.length){d=d.first();var e=a.$('input[name^\x3d"asin"].attach-warranty-input');0===e.length&&(e=a.$('.abbListItem.mbb__r input[name^\x3d"asin"]'));if(c.elementExists(e))for(var f=0;f<e.length;f++){var q=e[f].value,h=b.find("#huc-v2-order-row-item-"+q);if(h.length){b=c.elementExists(h)?h.find(".huc-v2-order-row-image"):
b.find(".hlb-item-link.hlb-asin-"+q+" \x3e img");d=d.add(b.clone());break}}}a.$(g.PANE_CART_BASE_HUC_IMAGE).remove();a.$(g.PANE_CART_BASE_INITIAL_IMAGE).hide().parent().append(d);d.wrap('\x3cdiv class\x3d"huc-image-wrapper"\x3e\x3c/div\x3e')};d.getAccessoryLoggingData=function(b){return{asin:a.$("#attach-accessory-asin-"+(parseInt(b)+1)).val(),index:b,priceFormatted:a.$("#attach-accessory-price-"+b+" \x3e .a-offscreen").text(),priceDecimal:parseFloat(a.$("#attach-accessory-base-price-"+b).val())||
null,currencySymbol:a.$("#attach-accessory-base-currency-symbol-"+b).val()||null,couponDecimal:parseFloat(a.$("#attach-accessory-coupon-benefit-amount-"+b).val())||null,couponType:a.$("#attach-accessory-coupon-benefit-type-"+b).val()||null,dealType:a.$("#attach-accessory-deal-type-"+b).val()||null,dealPercentSavings:parseInt(a.$("#attach-accessory-deal-percent-savings-"+b).val())||null,dealDollarAmount:a.$("#attach-accessory-deal-dollar-savings-"+b).val()||null,categoryIndex:a.$("#attach-accessory-category-index-"+
b).val()||null,categoryTitle:a.$("#attach-accessory-category-title-"+b).val()||null,asinIndexWithinCategory:a.$("#attach-accessory-asin-category-index-"+b).val()||null}};d.createAccessoryImpressions=function(){var b=[];a.$(g.PANE_ACCESSORY_ASIN).parent().each(function(c,e){e=a.$(e);if(e.is(":hidden")||"hidden"===e.css("visibility")||e.prop("data-accessory-seen"))return null;e.prop("data-accessory-seen",!0);b.push(d.getAccessoryLoggingData(c))});return b};d.resetAccessoryImpressions=function(){a.$(g.PANE_ACCESSORY_ASIN).parent().removeProp("data-accessory-seen")};
d.initializeAccessoriesDisplay=function(){d.initializeAccessoriesCards();d.initializeAccessoriesTiles();d.initializeCategorizedAccessoriesCards();a.animationFrameDelay(function(){d.resetAccessoryImpressions();e.logAccessoryImpressions(d.createAccessoryImpressions())})};d.initializeAccessoriesCards=function(){a.$(g.PANE_ACCESSORY_CARD).each(function(){var b=a.$(this),c=b.find(g.PANE_ACCESSORY_CARD_SEE_MORE),f=b.find(g.PANE_ACCESSORY_CARD_SEE_LESS),h=b.find(g.PANE_ACCESSORY_CARD_EXPAND_CONTENT);c.show();
f.hide();h.hide();b.removeProp("data-card-expanded");b.removeProp("data-card-previously-expanded");c.click(function(){c.hide();f.show();h.slideDown(400);b.prop("data-card-expanded",!0);b.parent().animate({scrollTop:b.get(0).offsetTop-30},400);b.prop("data-card-previously-expanded")||(b.prop("data-card-previously-expanded",!0),e.logAccessoryImpressions(d.createAccessoryImpressions()));e.logCount(e.CSM_METRICS.ATTACH_SHOW_MORE)});f.click(function(){f.hide();c.show();h.slideUp(400);b.prop("data-card-expanded",
!1);e.logCount(e.CSM_METRICS.ATTACH_SHOW_LESS)})})};d.initializeAccessoriesTiles=function(){m.when("a-truncate").execute(function(b){a.$(g.PANE_ACCESSORY_TITLE).each(function(){b.get(this).update()});a.$(g.PANE_ACCESSORY_TILE_ITEM).hover(function(){var c=a.$(this).find(g.PANE_ACCESSORY_TITLE);c.length&&b.get(c.get()).update()})})};d.initializeCategorizedAccessoriesCards=function(){c.elementExists(g.PANE_CATEGORIZED_ACCESSORIES_TILES_CARD)&&(a.on("a:expander:attach_see_more_expander:toggle:expand",
function(){e.logAccessoryImpressions(d.createAccessoryImpressions())}),a.on("a:expander:attach_category_expander:toggle:expand",function(){e.logAccessoryImpressions(d.createAccessoryImpressions())}))};d.initializeAccessoriesCarousel=function(){m.when("a-truncate","a-carousel-framework").execute(function(b,c){if(a.$(g.PANE_ACCESSORY_CAROUSEL).length){a.$(g.PANE_ACCESSORY_TITLE).each(function(){b.get(this).update()});c.createAll();var f=c.getCarousel(a.$(g.PANE_ACCESSORY_CAROUSEL));f&&(f.attachViewedPages=
[1],f.gotoPage(1,{animationDuration:1}),a.on("a:carousel:attach-carousel:change:animating",function(a){a.newValue||(a=f.getAttr("pageNumber"),-1===f.attachViewedPages.indexOf(a)&&(f.attachViewedPages.push(a),e.logAccessoryImpressions(d.createAccessoryImpressions())))}))}})};d.initializeCoupons=function(){var b;a.$(g.PANE_ACCESSORY_COUPON_BADGE_CLASS).each(function(){var b=a.$(this).text().replace(/\s+/g," ");a.$(this).attr("title",b)});a.on("a:popover:positionUpdated:attach-coupon-popover",d.handleCouponPopoverPositionUpdated);
a.on("a:popover:beforeShow:attach-coupon-popover",function(c){c.popover.$trigger.parents(g.PANE_ACCESSORY_TILE_ITEM).addClass("hover");b=d.createCouponPopoverPositionHandler(c);a.$(r).bind("scroll",b);a.$(g.PANE+" \x3e .a-scroller").bind("scroll",b)});a.on("a:popover:afterHide:attach-coupon-popover",function(c){c.popover.$trigger.parents(g.PANE_ACCESSORY_TILE_ITEM).removeClass("hover");a.$(r).unbind("scroll",b);a.$(g.PANE+" \x3e .a-scroller").unbind("scroll",b)});a.declarative("attach-coupon-checkbox",
"change",function(b){var c=b.data,e=b.$currentTarget.parents(g.PANE_ACCESSORY_COUPON);c&&c.ajaxClaimUrl?a.$.get(c.ajaxClaimUrl).done(function(){d.handleCouponClaimSuccess(e,c.accessoryItemIndex)}).fail(function(a,b,c){m.logError(Error(c),"Could not clip coupon: ","ERROR","attach-desktop-accessories-pane");d.handleCouponClaimError(e)}):(m.logError(Error("Coupon claim URL not available"),"Could not clip coupon: ","ERROR","attach-desktop-accessories-pane"),d.handleCouponClaimError(e))})};d.handleCouponPopoverPositionUpdated=
function(a){a.popover.$container.css("z-index",6E3)};d.createCouponPopoverPositionHandler=function(a){return function(){a.popover.updatePosition()}};d.handleCouponClaimSuccess=function(a,b){e.logPromotionClaimed(d.getAccessoryLoggingData(b-1));a.find(g.PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS).addClass("aok-hidden");a.find(g.PANE_ACCESSORY_COUPON_CLIPPED_CLASS).removeClass("aok-hidden");a=a.parents(g.PANE_ACCESSORY_TILE_ITEM);a.length&&(a.find(g.PANE_ACCESSORY_COUPON_BADGE_UNCLIPPED_CLASS).addClass("aok-hidden"),
a.find(g.PANE_ACCESSORY_COUPON_BADGE_CLIPPED_CLASS).removeClass("aok-hidden"))};d.handleCouponClaimError=function(a){a.find(g.PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS).addClass("aok-hidden");a.find(g.PANE_ACCESSORY_COUPON_CLIPPED_CLASS).addClass("aok-hidden");a.find(g.PANE_ACCESSORY_COUPON_ERROR_CLASS).removeClass("aok-hidden")};d.updateLightningDealTimer=function(b){var c=a.$("#attach-accessory-deal-timer-"+b).val()-1;a.$("#attach-accessory-deal-timer-"+b).val(c);var e=d.convertTimeLeftToString(c);
a.$("#attach-accessory-deal-timer-string-"+b).text(e);0===c?d.handleDealHasEnded(b):setTimeout(d.updateLightningDealTimer,1E3,b)};d.convertTimeLeftToString=function(a){var b=Math.floor(a/3600),c=Math.floor(a/60)%60;a%=60;return 0>=b?d.appendZeroIfSingleDigit(c)+":"+d.appendZeroIfSingleDigit(a):b+":"+d.appendZeroIfSingleDigit(c)+":"+d.appendZeroIfSingleDigit(a)};d.appendZeroIfSingleDigit=function(a){return(10>a?"0":"")+a};d.handleDealHasEnded=function(b){a.$(g.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).hasClass("aok-hidden")&&
(a.$("#attach-accessory-asin-"+(b+1)).parent().addClass("lightning-deal-ended"),a.$("#attach-accessory-deal-on-waitlist-"+b).addClass("aok-hidden"),a.$("#attach-accessory-deal-has-ended-"+b).removeClass("aok-hidden"))};d.updateLightningDealTimeToCheckoutTimer=function(b){var c=a.$("#attach-accessory-time-to-checkout-"+b).val()-1;a.$("#attach-accessory-time-to-checkout-"+b).val(c);var e=d.convertTimeLeftToString(c);a.$("#attach-accessory-time-to-checkout-string-"+b).text(e);0===c?(a.$("#attach-accessory-ld-in-cart-details-"+
b).addClass("aok-hidden"),a.$(g.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).addClass("aok-hidden"),a.$("#tile-add-accessory-badge-"+b).addClass("aok-hidden"),a.$(g.PANE_ACCESSORY_ADD_BUTTON_PREFIX+b).removeClass("aok-hidden"),a.$("#attach-accessory-deal-availability-details-"+b).removeClass("aok-hidden")):setTimeout(d.updateLightningDealTimeToCheckoutTimer,1E3,b)};d.handleLightningDealAddToCart=function(b,c,e){a.$("#attach_add_accessory-button-row-"+b).addClass("aok-hidden");"INWAITLIST"===e?a.$("#attach-accessory-deal-on-waitlist-"+
b).removeClass("aok-hidden"):(a.$("#attach-accessory-deal-availability-details-"+b).addClass("aok-hidden"),a.$("#attach-accessory-time-to-checkout-"+b).val(c/1E3),d.updateLightningDealTimeToCheckoutTimer(b),a.$("#attach-accessory-ld-in-cart-details-"+b).removeClass("aok-hidden"))};d.initializeLightningDealStatusRefresher=function(b){var e=a.$("#attach-accessory-claim-deal-params-"+b).val(),f=JSON.parse(c.unescapeJson(e));a.$("#attach-accessory-deal-has-ended-"+b).hasClass("aok-hidden")&&(e=[{dealID:f.dealId}],
e=JSON.stringify({requestMetadata:{marketplaceID:a.$(g.MARKETPLACE_ID).val(),clientID:"goldbox_udp",sessionID:a.$("#attach-sessionId").val(),customerID:a.$("#attach-customerId").val()},dealTargets:e,responseSize:"STATUS_ONLY",itemResponseSize:"NONE"}),a.$.ajax({type:"POST",url:"/xa/dealcontent/v2/GetDealStatus",dataType:"json",headers:{"cache-control":"no-cache"},data:e,success:function(a){a=a.dealStatus[f.dealId];var c=Number.MAX_VALUE;a&&d.updateLightningDealInfo(b,a.dealState,a.percentClaimed)&&
setTimeout(d.initializeLightningDealStatusRefresher,c<a.msCacheTtl?c:3E4,b)}}))};d.updateLightningDealInfo=function(b,c,e){if("AVAILABLE"!==c&&"WAITLIST"!==c)return d.handleDealHasEnded(b),!1;var f=a.$("#attach_add_accessory_button_"+b+"-announce");"WAITLIST"===c?f.html(a.$("#attach-accessory-join-waitlist-string").html()):"AVAILABLE"===c&&f.html(a.$("#attach-accessory-add-to-cart-string").html());a.$("#attach-accessory-percent-claimed-"+b).text(e);a.$("#attach-accessory-deal-progress-bar-width-"+
b).width(e+"%");return!0};return d});"use strict";m.when("A","attach-common","attach-weblabs").register("attach-desktop-side-sheet",function(a,c,h){var b={},e=[],k=-1,d,l,y,f,t,u,v=null,n=null,g=null,p=!1,q=null,w="false",A="auto",C=null,x=b.Selectors={PAGE_BACKGROUND:"#a-page",PLACEHOLDER:"#attach-dss-placeholder",SHEET:"#attach-desktop-sideSheet",MODAL_LAYER:".attach-dss-modal-layer",LIGHTBOX:"#attach-popover-lgtbox"};b.transitionDuration=500;b.onKeyDown=function(a){27===a.which&&b.next()};b.initialize=
function(){e=[];h.isSideSheetAccessibilityEnabled()&&(c.elementExists(x.MODAL_LAYER)?f=a.$(x.MODAL_LAYER):(f=a.$("\x3cdiv class\x3d'attach-dss-modal-layer'\x3e\x3c/div\x3e"),f.hide(),f.appendTo(document.body)));c.elementExists(x.SHEET)?b.$container=a.$(x.SHEET):(b.$container=a.$('\x3cdiv id\x3d"attach-desktop-sideSheet" class\x3d"a-section attach-desktop-sideSheet"\x3e\x3c/div\x3e'),b.$container.addClass("aok-hidden"),b.$container.appendTo(x.PLACEHOLDER));h.isSideSheetAccessibilityEnabled()&&(v=b.$container.parent());
c.elementExists(x.LIGHTBOX)||(h.isSideSheetAccessibilityEnabled()?(t=a.$("\x3cdiv id\x3d'attach-popover-lgtbox' class\x3d'a-declarative attach-dss-backdrop' data-action\x3d'a-popover-floating-close'\x3e\x3c/div\x3e"),t.hide(),t.appendTo(f)):(t=a.$("\x3cdiv id\x3d'attach-popover-lgtbox' class\x3d'a-declarative attach-popover a-modal' data-action\x3d'a-popover-floating-close' style\x3d'z-index: 1008; opacity: 0.4; cursor: pointer'\x3e\x3c/div\x3e"),t.hide(),t.appendTo(x.PLACEHOLDER)),t.click(b.next));
a.$(document).unbind("keydown",b.onKeyDown);a.$(document).keydown(b.onKeyDown);d=function(){};l=function(){};y=!0};b.setFailureHandler=function(a){d=a};b.setCloseHandler=function(a){l=a};b.fail=function(a,b){d(a,b)};b.addPane=function(a){e.push(a)};b.removePane=function(a){a=e.indexOf(a);-1<a&&e.splice(a,1)};b.getPaneIndex=function(a){return e.indexOf(a)};b.insertPane=function(a,b){b===B&&(b=e.length);e.splice(b,0,a);y=!0};b.hasPane=function(a){return-1<b.getPaneIndex(a)};b.next=function(){if(k+1===
e.length){t.hide();b.$container.animate({right:u},{duration:b.transitionDuration,complete:function(){e[k].hide();k=-1;l();h.isSideSheetAccessibilityEnabled()&&(f.hide(),C.focus(),b.$container.appendTo(v))}});r.ue&&r.ue.count&&r.ue.count("ATTACH_DSS_CLOSE_ACCESSORY_PANE",(r.ue.count("ATTACH_DSS_CLOSE_ACCESSORY_PANE")||0)+1);if(h.isSideSheetAccessibilityEnabled()){var c=a.$(x.PAGE_BACKGROUND).get(0);document.body.style.overflow=A;c.ariaHidden=w;n.remove();g.remove()}a.trigger("HIDE_SIDE_SHEET")}else-1!==
k&&(e[k].hide(),e[k+1].show(),k+=1)};b.show=function(){if(y){y=!1;var c=a.$.map(e,function(a){return a.load(b)});a.$.when.apply(a.$,c).fail(b.fail).done(function(){a.$.each(e,function(a,c){c.setup(b)});b.show()})}else if(h.isSideSheetAccessibilityEnabled()&&(f.show(),b.$container.addClass("aok-hidden").attr("role","dialog").attr("aria-modal","true").appendTo(f)),k=0,e[k].show(),u=b.$container.css("right"),b.$container.removeClass("aok-hidden"),b.$container.animate({right:"0"},b.transitionDuration,
"linear"),t.show(),r.ue&&r.ue.count&&(c=a.$("#attach-customerId").val()?"ATTACH_DSS_SHOW_HAS_CUSTOMER_ID":"ATTACH_DSS_SHOW_NO_CUSTOMER_ID",r.ue.count(c,(r.ue.count(c)||0)+1),c="true"===a.$("#attach-is-prime-member").val()?"ATTACH_DSS_IS_PRIME_MEMBER":"ATTACH_DSS_IS_NOT_PRIME_MEMBER",r.ue.count(c,(r.ue.count(c)||0)+1)),h.isSideSheetAccessibilityEnabled()){c=document.body;var d=a.$(x.PAGE_BACKGROUND).get(0);w=d.ariaHidden;d.ariaHidden="true";A=c.style.overflow;c.style.overflow="hidden";C=document.activeElement;
n=a.$('\x3cdiv tabindex\x3d"0"\x3e\x3c/div\x3e').insertBefore(b.$container);g=a.$('\x3cdiv tabindex\x3d"0"\x3e\x3c/div\x3e').insertAfter(b.$container)}};b.isEmpty=function(){return 0===e.length};h.isSideSheetAccessibilityEnabled()&&m.when("attach.utilities.focus-management").execute(function(a){document.addEventListener("focus",function(c){if(!p&&-1!==k){var d=b.$container.get(0);d.contains(c.target)?q=c.target:(p=!0,a.focusDescendant(d,"first"),q===document.activeElement&&a.focusDescendant(d,"last"),
p=!1,q=document.activeElement)}},!0)});return b});"use strict";m.when("A","attach-common","attach-weblabs","attach-logging","attach-maple","attach-desktop-warranty-pane","attach-desktop-accessories-pane","attach-desktop-side-sheet","attach-variant-registration").register("attach-desktop",function(a,c,h,b,e,k,d,l,y){var f={},t,u=r.ue,v=!0,n=f.Events={CLICK:"click",ATTACH_ATC_CLICK_NAMESPACE:"click.attachDSS",WARRANTY_SI_CLICK_NAMESPACE:"click.siatc",VAS_SI_CLICK_NAMESPACE:"click.lsatc",LD_CLAIM_SUCCESS:"deals_claimDealSuccess",
LD_CLAIM_ERROR:"deals_claimDealError"},g=f.Endpoints={ERROR_500_URL:"/gp/errors/500.html",WARRANTY_SI_CHECK:"/gp/si/util/is-si-with-triggers.html"},p=f.Selectors={ADD_TO_CART_BUTTON:"#add-to-cart-button",INSTALLMENTS_BUTTON:"#installments-button",ASIN:"#ASIN",QUANTITY:"#quantity",BASE_ITEM_PRICE_DECIMAL:"#attach-base-product-price",BASE_ITEM_CURRENCY_SYMBOL:"#attach-base-product-currency-symbol",ATTACH_ASIN_LIST:"#attach-asin-list",ATTACH_MARKETPLACE_ID:"#attach-marketplaceId",ATTACH_BASE_ASIN:"#attach-baseAsin",
MBB_WARRANTY_ITEM:"#abbWrapper .abbListItem input[type\x3dcheckbox]",WTY_TWISTER_SELECTED_GROUP:".warranty-twister-selected-box-group",WTY_TWISTER_WTY_OPTION:".warranty-twister-box-group-warranty-option",LD_BUY_BOX:"#dealsAccordionRow",LD_ATC_BUTTON:".gb-btn-atc"},q=f.Classes={ATTACH_DSS_ATC:"attach-dss-atc"},w=-1,A=function(){a.off(n.LD_CLAIM_SUCCESS,A);a.off(n.LD_CLAIM_ERROR,C);c.selectedBaseLightningDeal=!0;l.setCloseHandler(f.setupAddToCartButton);f.handleLdAddToCartClick();m.when("attach-lightning-deals-desktop").execute(function(a){a.handleDealClaim()})},
C=function(){a.off(n.LD_CLAIM_ERROR,C);a.off(n.LD_CLAIM_SUCCESS,A);a.$(p.LD_ATC_BUTTON).bind(n.CLICK,x)},x=function(){a.$(p.LD_ATC_BUTTON).unbind(n.CLICK,x);a.on(n.LD_CLAIM_SUCCESS,A);a.on(n.LD_CLAIM_ERROR,C)};f.initialize=function(){if(!c.elementExists(l.Selectors.PLACEHOLDER)){if(0===h.getAllWeblabsToTriggerClientSide().length)return!1;v=!1}f.setupDependencies();f.setupSideSheet();f.setupAddToCartButton()};f.setupDependencies=function(){var c=a.$(p.ATTACH_MARKETPLACE_ID).val();b.initialize(b.FEATURES.DSS,
c);b.setPayloadBuilder(function(){return{baseAsin:a.$(p.ASIN).val(),baseItemPriceDecimal:parseFloat(a.$(p.BASE_ITEM_PRICE_DECIMAL).val())||null,baseItemCurrencySymbol:a.$(p.BASE_ITEM_CURRENCY_SYMBOL).val()||null,quantity:Number(a.$(p.QUANTITY).val())||1}});e.initialize();m.when("attach-external-atc-interceptor").execute(function(a){t=a;t.enableModule()})};f.setupSideSheet=function(){l.initialize();l.setFailureHandler(f.failure);!h.isWarrantyPaneSuppressed()&&c.hasWarranty()?l.addPane(k):d.setShouldIncludeMaple(!0);
!h.servicesInterstitialDeprecated()||c.hasAccessories()?(l.addPane(d),l.setCloseHandler(f.setupAddToCartButton)):l.setCloseHandler(f.failureTransitionToHUC)};f.setupAddToCartButton=function(){a.$(document.body).delegate(p.ADD_TO_CART_BUTTON,n.ATTACH_ATC_CLICK_NAMESPACE,f.handleAddToCartClick);a.$(p.ADD_TO_CART_BUTTON).prop("type","button").addClass(q.ATTACH_DSS_ATC);h.isInstallmentsDssIntegrationEnabled()?(a.$(document.body).delegate(p.INSTALLMENTS_BUTTON,n.ATTACH_ATC_CLICK_NAMESPACE,f.handleAddToCartClick),
a.$(p.INSTALLMENTS_BUTTON).prop("type","button").addClass(q.ATTACH_DSS_ATC),a.$(p.INSTALLMENTS_BUTTON).click(function(){u&&u.trigger&&u.trigger("DP_INSTALLMENTS_DSS_231673","T1")})):a.$(p.INSTALLMENTS_BUTTON).click(function(){u&&u.trigger&&u.trigger("DP_INSTALLMENTS_DSS_231673","C")});h.isAttachLDSupportEnabled()&&c.elementExists(p.LD_BUY_BOX)&&(a.$(p.LD_ATC_BUTTON).bind(n.CLICK,x).addClass(q.ATTACH_DSS_ATC),!h.isWarrantyPaneSuppressed()&&c.hasWarranty()&&!l.hasPane(k)&&-1<w&&l.insertPane(k,w),b.logCount(b.CSM_METRICS.ATTACH_BASE_LD_PRESENT));
b.logCount(b.CSM_METRICS.ATTACH_SIDE_SHEET_CLOSE)};f.failure=function(a,b){switch(a){case c.FailureModes.ERROR_500:f.failureError500();break;case c.FailureModes.RESUBMIT_BUY_BOX:f.failureResubmitBuyBox();break;case c.FailureModes.UNBIND_ATC:f.failureUnbindATC();break;case c.FailureModes.REBIND_ATC:f.failureRebindATC();break;default:case c.FailureModes.TRANSITION_TO_HUC:f.failureTransitionToHUC()}};f.failureError500=function(){r.location=g.ERROR_500_URL};f.failureResubmitBuyBox=function(){h.isAttachLDSupportEnabled()&&
c.selectedBaseLightningDeal?f.failureRebindATC():(f.failureUnbindATC(),c.buyButton.click())};f.failureUnbindATC=function(){a.$(document.body).undelegate(p.ADD_TO_CART_BUTTON,n.ATTACH_ATC_CLICK_NAMESPACE);a.$(p.ADD_TO_CART_BUTTON).prop("type","submit");h.isInstallmentsDssIntegrationEnabled()&&(a.$(document.body).undelegate(p.INSTALLMENTS_BUTTON,n.ATTACH_ATC_CLICK_NAMESPACE),a.$(p.INSTALLMENTS_BUTTON).prop("type","submit"))};f.failureTransitionToHUC=function(){if(h.isAttachLDSupportEnabled()&&c.selectedBaseLightningDeal)return f.failureUnbindATC();
h.servicesInterstitialDeprecated()?a.$(document.body).undelegate(p.ADD_TO_CART_BUTTON,n.VAS_SI_CLICK_NAMESPACE):a.$(document.body).undelegate(p.ADD_TO_CART_BUTTON,n.WARRANTY_SI_CLICK_NAMESPACE);h.isInstallmentsDssIntegrationEnabled()&&(h.servicesInterstitialDeprecated()?a.$(document.body).undelegate(p.INSTALLMENTS_BUTTON,n.VAS_SI_CLICK_NAMESPACE):a.$(document.body).undelegate(p.INSTALLMENTS_BUTTON,n.WARRANTY_SI_CLICK_NAMESPACE));f.failureResubmitBuyBox()};f.failureRebindATC=function(){f.setupAddToCartButton()};
f.handleAddToCartClick=function(b){c.buyButton=a.$(b.target);a.$(document.body).undelegate(p.ADD_TO_CART_BUTTON,n.ATTACH_ATC_CLICK_NAMESPACE);h.isInstallmentsDssIntegrationEnabled()&&(a.$(document.body).undelegate(p.INSTALLMENTS_BUTTON,n.ATTACH_ATC_CLICK_NAMESPACE),c.getAtcForm().append(c.buyButton.filter("input").clone().attr("type","hidden")));h.isAttachLDSupportEnabled()&&c.elementExists(p.LD_BUY_BOX)&&a.$(p.LD_ATC_BUTTON).unbind(n.CLICK,x);h.isAttachLDSupportEnabled()&&!c.selectedBaseLightningDeal&&
h.servicesInterstitialDeprecated()&&!c.hasAccessories()&&l.setCloseHandler(f.failureTransitionToHUC);a.$.when().pipe(f.checkWarranty).pipe(f.checkClientSideWeblabTriggering).pipe(f.checkFeatureExists).pipe(f.show).fail(f.failure);if(v)return b.preventDefault(),b.stopImmediatePropagation(),!1};f.handleLdAddToCartClick=function(){a.$(document.body).undelegate(p.ADD_TO_CART_BUTTON,n.ATTACH_ATC_CLICK_NAMESPACE);a.$(p.LD_ATC_BUTTON).unbind(n.CLICK,x);a.$.when().pipe(f.checkWarranty).pipe(f.checkClientSideWeblabTriggering).pipe(f.checkFeatureExists).pipe(f.show).fail(f.failure)};
f.checkFeatureExists=function(){if(f.shouldSuppressForFeatureNotPresent())return h.isAttachLDSupportEnabled()&&c.selectedBaseLightningDeal?(a.trigger("HIDE_SIDE_SHEET"),c.selectedBaseLightningDeal=!1,c.reject(c.FailureModes.REBIND_ATC)):c.reject(c.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_SUPPRESSED_FEATURE_DOES_NOT_EXIST"})};f.checkWarranty=function(){if(!h.isWarrantyPaneSuppressed())if(h.isAttachLDSupportEnabled()&&c.selectedBaseLightningDeal&&(!h.isWarrantyLDSupportEnabled()||c.isMultiQuantityDeal()||
!a.$("#attach-warranty-ld #attach-warranty-asin").val()))w=l.getPaneIndex(k),l.removePane(k);else if(f.shouldSuppressForWarrantyInMbb())l.removePane(k),d.setShouldIncludeMaple(!0),b.logCount("ATTACH_DSS_SUPPRESSED_MBB_WARRANTY_CHECKED",1);else if(h.servicesInterstitialDeprecated()&&f.shouldSuppressforMultiQuantityMonthlyWarranty())l.removePane(k),d.setShouldIncludeMaple(!0),b.logCount("ATTACH_DSS_SUPPRESSED_MULTI_QUANTITY_MONTHLY_WARRANTY",1);else if(c.hasWarranty())return a.$.get(g.WARRANTY_SI_CHECK).pipe(f.handleSICheck,
f.handleSIFailure)};f.checkClientSideWeblabTriggering=function(){h.triggerClientSideWeblabs();if(!h.servicesInterstitialDeprecated()&&!c.elementExists(p.ATTACH_ASIN_LIST))return c.reject(c.FailureModes.UNBIND_ATC,{count:"ATTACH_DSS_SUPPRESSED_EMPTY_ASIN_LIST"})};f.handleSICheck=function(a){if(!a)return c.reject(c.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_SUPPRESSED_SI_CHECK_FAILURE"});a.suppressSi&&(l.removePane(k),d.setShouldIncludeMaple(!0),b.logCount("ATTACH_DSS_SUPPRESSED_SI",1))};f.handleSIFailure=
function(){return c.reject(c.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_SUPPRESSED_SI_CHECK_FAILURE"})};f.shouldSuppressForFeatureNotPresent=function(){return h.servicesInterstitialDeprecated()?!c.elementExists(l.Selectors.PLACEHOLDER)||l.isEmpty():!c.elementExists(l.Selectors.PLACEHOLDER)||!c.elementExists(p.ATTACH_ASIN_LIST)||!c.elementExists(p.ATTACH_MARKETPLACE_ID)||!c.elementExists(p.ATTACH_BASE_ASIN)};f.shouldSuppressForWarrantyInMbb=function(){return h.isWarrantyTwisterPlusDesktopEnabled()?
0<a.$(p.MBB_WARRANTY_ITEM).filter(":checked").length||0<a.$(p.WTY_TWISTER_SELECTED_GROUP).filter(p.WTY_TWISTER_WTY_OPTION).length:0<a.$(p.MBB_WARRANTY_ITEM).filter(":checked").length};f.shouldSuppressforMultiQuantityMonthlyWarranty=function(){var b=Number(a.$(p.QUANTITY).val())||1;return c.hasMonthlyWarranty()&&1<b};f.show=function(){l.show()};return f});m.when("A","attach-desktop","attach-weblabs","ready").execute("attach-desktop-main",function(a,c,h){c.initialize();a.on("a:pageUpdate",a.debounce(function(){c.initialize();
a.trigger("attach:dss:initialized")},300))});"use strict";m.when("A","attach-desktop","dp-util-cookie","cf").execute(function(a,c,h){"000-0000000-8675309"===a.$("#attach-sessionId").val()&&a.$("#attach-sessionId").val(h("session-id"))});"use strict";m.when("A","attach-logging","ready").register("attach-categorized-cards",function(a,c){var h=self.Selectors={CATEGORIZED_ACCESSORIES_PANE:"#attach-categorized-accessories",CATEGORIZED_ACCESSORIES_SEE_MORE:".category-see-more",CATEGORIZED_ACCESSORIES_SEE_LESS:".category-see-less",
CATEGORIZED_CARD_EXPAND_CONTENT:".card-expand-content",CATEGORIZED_CARD_EXPANDABLE:".card-expandable",CATEGORIZED_CARD_CATEGORY:".card-category"},b=self.Constants={CATEGORY_CARD_EXPANDED:"category-card-expanded",CATEGORY_CARD_PREVIOUSLY_EXPANDED:"category-card-previously-expanded"};self.initializeCategorizedCards=function(){a.$(h.CATEGORIZED_ACCESSORIES_PANE+h.CATEGORIZED_CARD_EXPANDABLE+" "+h.CATEGORIZED_CARD_CATEGORY).each(function(){var e=a.$(this),k=e.find(h.CATEGORIZED_ACCESSORIES_SEE_MORE),
d=e.find(h.CATEGORIZED_ACCESSORIES_SEE_LESS),l=e.find(h.CATEGORIZED_CARD_EXPAND_CONTENT);k.show();d.hide();l.hide();e.removeProp(b.CATEGORY_CARD_EXPANDED);e.removeProp(b.CATEGORY_CARD_PREVIOUSLY_EXPANDED);k.click(function(){k.hide();d.show();l.slideDown(400);e.prop(b.CATEGORY_CARD_EXPANDED,!0);e.parent().animate({scrollTop:e.get(0).offsetTop-30},400);c.logCount(c.CSM_METRICS.ATTACH_SHOW_MORE)});d.click(function(){d.hide();k.show();l.slideUp(400);e.prop(b.CATEGORY_CARD_EXPANDED,!1);c.logCount(c.CSM_METRICS.ATTACH_SHOW_LESS)})})};
return self});"use strict";m.when("A","attach-logging","attach-weblabs").register("attach-secondary-side-sheet",function(a,c,h){var b=a.$,e={name:"secondary-side-sheet"},k={},d=e.Utilities={},l,m,f=e.AuiConstants={AUI_SPINNER:".a-spinner-wrapper",AOK_HIDDEN:"aok-hidden"},t=e.Htmltags={LI:"li",IMG:"img",IMG_SRC:"src",IMG_ALT:"alt",INPUT:"input",DATA_ASININDEX:"asinindex"},r=e.CssProsVal={CSS_DISPLAY:"display",CSS_DISPLAY_INLINE_BLOCK:"inline-block",CSS_WIDTH:"width",CSS_HEIGHT:"height"},v=e.Declarative=
{ATTACH_ACCESSORY_MINI_DP:"attach_accessory_mini_dp",MINI_DP_ATC:"mini_dp_add_to_cart",MINI_DP_BACK_BUTTON:"mini_dp_back_button",MINI_DP_NO_THANKS:"mini_dp_no_thanks"},n=e.Events={UPSELL_ASIN_ADDED_TO_CART:"UPSELL_ASIN_ADDED_TO_CART",UPSELL_ASIN_NOT_ADDED_TO_CART:"UPSELL_ASIN_NOT_ADDED_TO_CART",HIDE_SIDE_SHEET:"HIDE_SIDE_SHEET",CLICK:"click",ATTACH_LOADED_ACCESSORIES_PANE_SUCCESSFULLY:"LOADED_ACCESSORIES_PANE_SUCCESSFULLY",RESET_SECONDARY_SIDE_SHEET_MODULE:"RESET_SECONDARY_SIDE_SHEET_MODULE"},g=e.Selectors=
{PANE_ACCESORIES_CARD:"#attach-accessories",PANE_ACCESSORY_ADD_BUTTON_PREFIX:"#attach_add_accessory_button_",PANE_ACCESSORY_ADD_SUCCESS_PREFIX:"#attach_add_accessory_alert_",PANE_ACCESSORY_ADD_ERROR_PREFIX:"#attach_add_accessory_error_",PANE_ACCESSORY_DISPLAY:".attach-accessory-display-row, .attach-accessory-tile",PANE_CATEGORIZED_ACCESSORIES_CARD:"#attach-categorized-accessories",BASE_ASIN:"#ASIN",SECONDARY_SIDE_SHEET:".secondary-side-sheet",BACK_BUTTON:".back-button",MINI_DP_VIEW:".miniDp-view",
MINI_DP_RESPONSE:".miniDpResponse",ASIN_TITLE:".asin-title",ASIN_REVIEW:".asin-review",ASIN_REVIEW_ROW:".asin-review-row",PRICE_OFFER_ROW:".price-offer-row",ASIN_OFFER_PRICE:".asinOfferPrice",PRODUCT_IMAGE_MAIN:".productImageMain",PRODUCT_IMAGES_LIST:".productImagesList",FEATURE_BULLET_POINTS:".featureBulletPoints",MINI_DP_PRODUCT_FEATURES:".mini_dp_product_features",MINI_DP_IMG_THUMBNAIL_LIST:".imgThumbnailList",MINI_DP_ACTION_BUTTONS:".miniDp_action_buttons",MINI_DP_ACTION_BUTTONS_STATES:".miniDp-action-buttons-states",
MINI_DP_ADD_ACCESSORY_ALERT:"#miniDp_attach_add_accessory_alert",MINI_DP_ADD_ACCESSORY_ERROR:"#miniDp_attach_add_accessory_error",MINI_DP_ADD_TO_CART_RETRY:".attach-add-to-cart-retry",MINI_DP_ADD_ACCESSORY_ASIN:"#attach-minidp-accessory-asin"},p=e.RefTags={MINI_DP_SUCCESSFUL_LOAD:"dp_atch_dss_ss_ce_",MINI_DP_ADD_ACCESSORY_CLICK:"dp_atch_dss_atc_ce_",MINI_DP_BACK_BUTTON_CLICK:"dp_atch_dss_ss_back_ce_",MINI_DP_NO_THANKS_CLICK:"dp_atch_dss_ss_nt_ce_",MINI_DP_ADD_TO_CART_SUCCESS:"dp_atch_dss_atc_success_ce_",
MINI_DP_ADD_TO_CART_FAILURE:"dp_atch_dss_atc_fail_ce_"},q=e.MiniDpAjax={ENDPOINT:"/gp/product/ajax?experienceId\x3dminidp",MINI_DP_AJAX_ENDPOINT:"/gp/product/features/aloha-ppd/udp-ajax-handler/minidp.html?",MINI_DP_AJAX_TAB:"\x26activeTab\x3d0",TEXT_STATUS_SUCCESS:200};d.showHideSpinner=function(b){b?a.$(f.AUI_SPINNER).show():a.$(f.AUI_SPINNER).hide()};d.isCategoryView=function(){return a.$(g.PANE_CATEGORIZED_ACCESSORIES_CARD).length?!0:!1};d.showSecondarySideSheet=function(b){b?(d.isCategoryView()?
a.$(g.PANE_CATEGORIZED_ACCESSORIES_CARD).hide():a.$(g.PANE_ACCESORIES_CARD).hide(),a.$(g.SECONDARY_SIDE_SHEET).slideDown(1E3),d.showHideSpinner(!0),a.$(g.BACK_BUTTON).show(),a.$(g.SECONDARY_SIDE_SHEET+" "+g.MINI_DP_VIEW).hide()):(d.isCategoryView()?a.$(g.PANE_CATEGORIZED_ACCESSORIES_CARD).slideDown(2E3):a.$(g.PANE_ACCESORIES_CARD).slideDown(2E3),a.$(g.BACK_BUTTON).hide(),a.$(g.SECONDARY_SIDE_SHEET).hide())};e.init=function(){a.declarative(v.ATTACH_ACCESSORY_MINI_DP,n.CLICK,function(e){function w(){b(g.MINI_DP_VIEW+
" "+g.MINI_DP_IMG_THUMBNAIL_LIST+" "+t.LI).hover(function(a){a=b(this).find(t.IMG).attr(t.IMG_SRC);b(g.MINI_DP_VIEW+" "+g.PRODUCT_IMAGE_MAIN+" "+t.IMG).attr(t.IMG_SRC,a);c.logCount(c.CSM_METRICS.MINI_DP_CAROUSEL_THUMBNAIL_CHANGE)})}function u(){d.showSecondarySideSheet(!1);var e=b(g.SECONDARY_SIDE_SHEET).data(t.DATA_ASININDEX);e in k||(a.$(g.PANE_ACCESSORY_ADD_BUTTON_PREFIX+e).find(t.INPUT).click(),k[e]=!0,c.logSecondarySheetRefTag(p.MINI_DP_ADD_ACCESSORY_CLICK+D+"_"+z.upsellasin),c.logCount(c.CSM_METRICS.MINI_DP_ATC),
c.endLatencyCapture(c.CSM_METRICS.MINI_DP_DWELL_TIME))}function y(e,f,h){h.http.status===q.TEXT_STATUS_SUCCESS&&e!==B&&(a.$(g.SECONDARY_SIDE_SHEET+" "+g.MINI_DP_RESPONSE).html(e),H(),d.showHideSpinner(!1),a.$(g.SECONDARY_SIDE_SHEET+" "+g.MINI_DP_VIEW).show());a.declarative(v.MINI_DP_ATC,n.CLICK,u);b(g.MINI_DP_VIEW+" "+g.MINI_DP_ADD_TO_CART_RETRY).unbind(n.CLICK).bind(n.CLICK,u);c.logSecondarySheetRefTag(p.MINI_DP_SUCCESSFUL_LOAD+D+"_"+z.upsellasin)}function F(a,b,c){d.showSecondarySideSheet(!1)}function G(){var a=
b(g.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+D).css(r.CSS_DISPLAY),c=b(g.PANE_ACCESSORY_ADD_ERROR_PREFIX+D).css(r.CSS_DISPLAY);a===r.CSS_DISPLAY_INLINE_BLOCK?(b(g.MINI_DP_ACTION_BUTTONS_STATES+" "+g.MINI_DP_ADD_ACCESSORY_ALERT).removeClass(f.AOK_HIDDEN),b(g.MINI_DP_ACTION_BUTTONS_STATES+" "+g.MINI_DP_ADD_ACCESSORY_ERROR).addClass(f.AOK_HIDDEN),b(g.MINI_DP_ACTION_BUTTONS).addClass(f.AOK_HIDDEN)):c===r.CSS_DISPLAY_INLINE_BLOCK?(b(g.MINI_DP_ACTION_BUTTONS_STATES+" "+g.MINI_DP_ADD_ACCESSORY_ERROR).removeClass(f.AOK_HIDDEN),
b(g.MINI_DP_ACTION_BUTTONS_STATES+" "+g.MINI_DP_ADD_ACCESSORY_ALERT).addClass(f.AOK_HIDDEN),b(g.MINI_DP_ACTION_BUTTONS).addClass(f.AOK_HIDDEN)):(b(g.MINI_DP_ACTION_BUTTONS_STATES+" "+g.MINI_DP_ADD_ACCESSORY_ALERT).addClass(f.AOK_HIDDEN),b(g.MINI_DP_ACTION_BUTTONS_STATES+" "+g.MINI_DP_ADD_ACCESSORY_ERROR).addClass(f.AOK_HIDDEN),b(g.MINI_DP_ACTION_BUTTONS).removeClass(f.AOK_HIDDEN))}function H(){a.$(g.MINI_DP_VIEW+" "+g.ASIN_TITLE).html(I);a.$(g.MINI_DP_VIEW+" "+g.ASIN_REVIEW).html(J);a.$(g.MINI_DP_VIEW+
" "+g.PRICE_OFFER_ROW).html(K);a.$(g.MINI_DP_VIEW+" "+g.ASIN_OFFER_PRICE).html(L);var c=a.$(g.MINI_DP_RESPONSE+" "+g.PRODUCT_IMAGES_LIST+" "+t.LI+" "+t.IMG);c=a.$(c).map(function(){return a.$(this).attr(t.IMG_SRC)});b(g.MINI_DP_VIEW+" "+g.PRODUCT_IMAGE_MAIN+" "+t.IMG).attr(t.IMG_SRC,c[0]);b(g.MINI_DP_VIEW+" "+g.PRODUCT_IMAGE_MAIN+" "+t.IMG).attr(t.IMG_ALT,c[0]);c=b(g.MINI_DP_RESPONSE+" "+g.PRODUCT_IMAGES_LIST).clone();b(g.MINI_DP_VIEW+" "+g.MINI_DP_IMG_THUMBNAIL_LIST).html(c[0]);w();b(g.MINI_DP_VIEW+
" "+g.MINI_DP_IMG_THUMBNAIL_LIST+" "+t.IMG).each(function(){b(this).removeAttr(r.CSS_WIDTH).removeAttr(r.CSS_HEIGHT)});c=b(g.MINI_DP_RESPONSE+" "+g.FEATURE_BULLET_POINTS).clone();b(g.MINI_DP_VIEW+" "+g.MINI_DP_PRODUCT_FEATURES).html(c);G()}a.$(e.$target).attr("id");var E=a.$(e.$declarativeParent);e=a.$(e.$target).closest(g.PANE_ACCESSORY_DISPLAY);var z=a.$(E).data(v.ATTACH_ACCESSORY_MINI_DP),I=z.title,J=a.$(e).find(g.ASIN_REVIEW_ROW).html(),K=a.$(e).find(g.PRICE_OFFER_ROW).html(),L=z.offerprice,D=
z.asinIndex;E=z.marketplaceid;m=D;l=z.upsellasin;b(g.MINI_DP_ADD_ACCESSORY_ASIN).val(l);b(g.SECONDARY_SIDE_SHEET).data(t.DATA_ASININDEX,D);d.showSecondarySideSheet(!0);c.logCount(c.CSM_METRICS.MINI_DP_OPEN);c.beginLatencyCapture(c.CSM_METRICS.MINI_DP_DWELL_TIME);h.isMiniDpMasonDeprecated()?a.get(q.ENDPOINT,{params:{asin:z.upsellAsin},success:y,error:F}):a.ajax(q.MINI_DP_AJAX_ENDPOINT+"asin\x3d"+z.upsellasin+"\x26marketplaceId\x3d"+E+"\x26offerId\x3d"+z.offerlistingid+q.MINI_DP_AJAX_TAB,{method:"get",
success:y,error:F})});a.declarative(v.MINI_DP_BACK_BUTTON,n.CLICK,function(a){d.showSecondarySideSheet(!1);c.logSecondarySheetRefTag(p.MINI_DP_BACK_BUTTON_CLICK+m+"_"+l);c.logCount(c.CSM_METRICS.MINI_DP_BACK);c.endLatencyCapture(c.CSM_METRICS.MINI_DP_DWELL_TIME)});a.declarative(v.MINI_DP_NO_THANKS,n.CLICK,function(a){d.showSecondarySideSheet(!1);c.logSecondarySheetRefTag(p.MINI_DP_NO_THANKS_CLICK+m+"_"+l);c.logCount(c.CSM_METRICS.MINI_DP_CANCEL);c.endLatencyCapture(c.CSM_METRICS.MINI_DP_DWELL_TIME)});
a.on(n.UPSELL_ASIN_ADDED_TO_CART,function(a){a in k||(k[a]=!0);c.logSecondarySheetRefTag(p.MINI_DP_ADD_TO_CART_SUCCESS+m+"_"+l);c.endLatencyCapture(c.CSM_METRICS.ATTACH_UPSELL_ATC_LATENCY)});a.on(n.UPSELL_ASIN_NOT_ADDED_TO_CART,function(a){a in k&&delete k[a];c.logSecondarySheetRefTag(p.MINI_DP_ADD_TO_CART_FAILURE+m+"_"+l)});a.on(n.HIDE_SIDE_SHEET,function(){d.showSecondarySideSheet(!1)})};e.resetSecondarySideSheet=function(){k={}};a.on(n.ATTACH_LOADED_ACCESSORIES_PANE_SUCCESSFULLY,e.init);a.on(n.RESET_SECONDARY_SIDE_SHEET_MODULE,
e.resetSecondarySideSheet);return e});"use strict";m.when("A","3p-promise").register("attach.amazonapi.client",function(a,c){var h={buildRequestUrl:function(b){var c=a.$("#attach-aapi-ajax-endpoint").val()+"/"+b.apiPath,h=[];if(b.additionalParameters)for(var d in b.additionalParameters)b.additionalParameters.hasOwnProperty(d)&&h.push(d+"\x3d"+encodeURIComponent(b.additionalParameters[d]));h.length&&(c+="?"+h.join("\x26"));return c},buildAcceptHeader:function(a){var b=["application/vnd.com.amazon.api+json",
'type\x3d"'+a.responseType+'"'];a.resourceInclusions&&b.push('expand\x3d"'+a.resourceInclusions.join(",")+'"');return b.join("; ")},buildAcceptLanguageHeader:function(b){(b=b.languageOfPreference)||(b=a.$("#attach-languageOfPreference").val());return b.replace(/_/g,"-")},buildRequestHeaders:function(b){var c=a.$("#attach-aapi-ajax-csrf-token").val();c={Accept:h.buildAcceptHeader(b),"Accept-Language":h.buildAcceptLanguageHeader(b),"x-api-csrf-token":c};b.requestType&&(c["Content-Type"]='application/vnd.com.amazon.api+json; type\x3d"'+
b.requestType+'"');return c},makeRequest:function(b){return new c(function(c,k){var d=h.buildRequestUrl(b),e=h.buildRequestHeaders(b),m=b.data?JSON.stringify(b.data):B;return a.$.ajax({type:b.method,url:d,headers:e,data:m,xhrFields:{withCredentials:!0},dataType:"json",success:function(a){c(a)},error:function(a){var b={statusCode:a.status,xhr:a};if(a.responseText)try{b.data=JSON.parse(a.responseText)}catch(u){b.data=a.responseText}k(b)}})})},isException:function(a){return a&&"undefined"!==typeof a.statusCode&&
"undefined"!==typeof a.xhr}};return h});"use strict";m.when("attach.amazonapi.client").register("attach.amazonapi.cart.add-items",function(a){var c={},h=function(a){return a},b=function(a){if(a.data&&"add-items.incomplete-add.error/v1"===a.data.type)return a.data;throw a;};c.addItems=function(c,k){c={apiPath:"cart/carts/retail/items",requestType:"cart.add-items.request/v1",responseType:"cart.add-items/v1",method:"POST",data:{items:c},additionalParameters:{}};k&&(c.additionalParameters.ref=k);return a.makeRequest(c).then(h).catch(b)};
return c});"use strict";m.when("attach.amazonapi.client").register("attach.amazonapi.cart.items",function(a){return{items:function(c,h){c={apiPath:"cart/items",requestType:"cart.items.request/v1",responseType:"cart.items/v1",method:"GET",additionalParameters:c};h&&(c.additionalParameters.ref=h);return a.makeRequest(c)}}});"use strict";m.when("attach.amazonapi.client").register("attach.amazonapi.cart.summary",function(a){var c={},h=function(a){return a};c.get=function(b){var c={apiPath:"cart/summary",
responseType:"cart.summary/v1",method:"GET",additionalParameters:{}};b&&(c.additionalParameters.cartTypes=b);return a.makeRequest(c).then(h)};return c});"use strict";m.when("attach.amazonapi.client").register("attach.amazonapi.products.productV2",function(a){return{productV2:function(c,h,b,e){b={apiPath:"products/"+c,requestType:"product.request/v2",responseType:"product/v2",method:"GET",resourceInclusions:h,additionalParameters:b||{}};e&&(b.additionalParameters.ref=e);return a.makeRequest(b)}}});
"use strict";m.when("A").register("attach.events",function(a){return{Accessories:{ADD_TO_CART_STATUS:"attach:accessories:add-to-cart:status",SHOW:"attach:accessories:pane:show",HIDE:"attach:accessories:pane:hide",SEE_MORE_EXPAND:"attach:accessories:see-more:expand",SEE_MORE_COLLAPSE:"attach:accessories:see-more:collapse",CAROUSEL_PAGE_VIEW:"attach:accessories:carousel:page-view"},Cart:{ADD_BASE_HUC:"attach:add-base-to-cart",ADD_BASE_HUC_SUCCESS:"attach:add-base-to-cart:huc-success",UPDATE_SUMMARY:"attach:cart:summary:update"}}});
"use strict";m.register("attach.utilities.focus-management",function(){function a(a){try{a.focus()}catch(b){}return a===document.activeElement}function c(h,b){for(var e=0;e<h.children.length;e++){var k=h.children.item("last"===b?h.children.length-e-1:e);if(a(k)||c(k,b))return!0}return!1}return{attemptFocus:a,focusDescendant:c}});"use strict";m.register("attach.utilities.strings",function(){var a=/\$\{(?:hash-get\s+)?([^\}]+)\}/g;return{substituteParameters:function(c,h){return c.replace(a,function(a,
c){return h[c]||""})}}});"use strict";m.when("A","attach.events").register("attach.views.accessories.carousel",function(a,c){a.on(c.Accessories.SHOW,function(h){m.when("a-truncate","a-carousel-framework").execute(function(b,e){if(h.find(".a-carousel-container").length){a.$(".attach-accessory-title").each(function(){b.get(this).update()});e.createAll();var k=e.getCarousel(h.find(".a-carousel-container"));k&&(k.attachViewedPages=[1],k.gotoPage(1,{animationDuration:1}),a.on("a:carousel:attach-carousel:change:animating",
function(b){if(!b.newValue){b=k.getAttr("pageNumber");var d=!1;-1===k.attachViewedPages.indexOf(b)&&(k.attachViewedPages.push(b),d=!0);a.trigger(c.Accessories.CAROUSEL_PAGE_VIEW,{pageNumber:b,isFirstView:d})}}))}})})});"use strict";m.when("A","attach.events","attach-weblabs","attach-logging").register("attach.views.accessories.coupons",function(a,c,h,b){function e(a){a.popover.$container.css("z-index",6E3)}function k(a){return function(){a.popover.updatePosition()}}function d(a){a.find(l.PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS).addClass("aok-hidden");
a.find(l.PANE_ACCESSORY_COUPON_CLIPPED_CLASS).addClass("aok-hidden");a.find(l.PANE_ACCESSORY_COUPON_ERROR_CLASS).removeClass("aok-hidden")}var l={PANE_ACCESSORY_COUPON:".attach-accessory-coupon",PANE_ACCESSORY_COUPON_PREFIX:"#attach-accessory-coupon-",PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS:".attach-coupon-unclipped",PANE_ACCESSORY_COUPON_CLIPPED_CLASS:".attach-coupon-clipped",PANE_ACCESSORY_COUPON_ERROR_CLASS:".attach-coupon-error",PANE_ACCESSORY_COUPON_BADGE_CLASS:".attach-coupon-short-badge",PANE_ACCESSORY_COUPON_BADGE_UNCLIPPED_CLASS:".attach-coupon-badge-unclipped",
PANE_ACCESSORY_COUPON_BADGE_CLIPPED_CLASS:".attach-coupon-badge-clipped"};a.on(c.Accessories.SHOW,function(c){if(h.isShowAccessoryCouponsDssEnabled()){var f;a.$(l.PANE_ACCESSORY_COUPON_BADGE_CLASS).each(function(){var b=a.$(this).text().replace(/\s+/g," ");a.$(this).attr("title",b)});a.on("a:popover:positionUpdated:attach-coupon-popover",e);a.on("a:popover:beforeShow:attach-coupon-popover",function(b){b.popover.$trigger.parents(l.PANE_ACCESSORY_TILE_ITEM).addClass("hover");f=k(b);a.$(r).bind("scroll",
f);c.children(".a-scroller").bind("scroll",f)});a.on("a:popover:afterHide:attach-coupon-popover",function(b){b.popover.$trigger.parents(l.PANE_ACCESSORY_TILE_ITEM).removeClass("hover");a.$(r).unbind("scroll",f);c.children(".a-scroller").unbind("scroll",f)});a.declarative("attach-coupon-checkbox","change",function(c){var e=c.data,f=c.$currentTarget.parents(l.PANE_ACCESSORY_COUPON);e&&e.ajaxClaimUrl?a.$.get(e.ajaxClaimUrl).done(function(){b.logPromotionClaimed(b.getAccessoryLoggingData(e.accessoryItemIndex-
1));f.find(l.PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS).addClass("aok-hidden");f.find(l.PANE_ACCESSORY_COUPON_CLIPPED_CLASS).removeClass("aok-hidden");var a=f.parents(l.PANE_ACCESSORY_TILE_ITEM);a.length&&(a.find(l.PANE_ACCESSORY_COUPON_BADGE_UNCLIPPED_CLASS).addClass("aok-hidden"),a.find(l.PANE_ACCESSORY_COUPON_BADGE_CLIPPED_CLASS).removeClass("aok-hidden"))}).fail(function(a,b,c){m.logError(Error(c),"Could not clip coupon: ","ERROR","attach-desktop-accessories-pane");d(f)}):(m.logError(Error("Coupon claim URL not available"),
"Could not clip coupon: ","ERROR","attach-desktop-accessories-pane"),d(f))})}})});"use strict";m.when("A","attach-common","attach.events").register("attach.views.accessories.lightning-deals",function(a,c,h){function b(c){var d=a.$("#attach-accessory-deal-timer-"+c).val()-1;a.$("#attach-accessory-deal-timer-"+c).val(d);var f=e(d);a.$("#attach-accessory-deal-timer-string-"+c).text(f);0===d?k(c):setTimeout(b,1E3,c)}function e(a){var b=Math.floor(a/3600),c=Math.floor(a/60)%60;a%=60;return 0>=b?(10>c?
"0":"")+c+":"+((10>a?"0":"")+a):b+":"+((10>c?"0":"")+c)+":"+((10>a?"0":"")+a)}function k(b){a.$(m.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).hasClass("aok-hidden")&&(a.$("#attach-accessory-asin-"+(b+1)).parent().addClass("lightning-deal-ended"),a.$("#attach-accessory-deal-on-waitlist-"+b).addClass("aok-hidden"),a.$("#attach-accessory-deal-has-ended-"+b).removeClass("aok-hidden"))}function d(b){var c=a.$("#attach-accessory-time-to-checkout-"+b).val()-1;a.$("#attach-accessory-time-to-checkout-"+b).val(c);
var f=e(c);a.$("#attach-accessory-time-to-checkout-string-"+b).text(f);0===c?(a.$("#attach-accessory-ld-in-cart-details-"+b).addClass("aok-hidden"),a.$(m.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).addClass("aok-hidden"),a.$("#tile-add-accessory-badge-"+b).addClass("aok-hidden"),a.$(m.PANE_ACCESSORY_ADD_BUTTON_PREFIX+b).removeClass("aok-hidden"),a.$("#attach-accessory-deal-availability-details-"+b).removeClass("aok-hidden")):setTimeout(d,1E3,b)}function l(b){var d=a.$("#attach-accessory-claim-deal-params-"+
b).val(),e=JSON.parse(c.unescapeJson(d));a.$("#attach-accessory-deal-has-ended-"+b).hasClass("aok-hidden")&&(d=[{dealID:e.dealId}],d=JSON.stringify({requestMetadata:{marketplaceID:a.$("#attach-marketplaceId").val(),clientID:"goldbox_udp",sessionID:a.$("#attach-sessionId").val(),customerID:a.$("#attach-customerId").val()},dealTargets:d,responseSize:"STATUS_ONLY",itemResponseSize:"NONE"}),a.$.ajax({type:"POST",url:"/xa/dealcontent/v2/GetDealStatus",dataType:"json",headers:{"cache-control":"no-cache"},
data:d,success:function(c){c=c.dealStatus[e.dealId];var d=Number.MAX_VALUE;if(c){var f=c.dealState;var h=c.percentClaimed;if("AVAILABLE"!==f&&"WAITLIST"!==f)k(b),f=!1;else{var q=a.$("#attach_add_accessory_button_"+b+"-announce");"WAITLIST"===f?q.html(a.$("#attach-accessory-join-waitlist-string").html()):"AVAILABLE"===f&&q.html(a.$("#attach-accessory-add-to-cart-string").html());a.$("#attach-accessory-percent-claimed-"+b).text(h);a.$("#attach-accessory-deal-progress-bar-width-"+b).width(h+"%");f=!0}f&&
setTimeout(l,d<c.msCacheTtl?d:3E4,b)}}}))}var m={PANE_ACCESSORY_LIGHTNING_DEAL:".attach-accessory-lightning-deal",PANE_ACCESSORY_LIGHTNING_DEAL_PREFIX:"#attach-accessory-lightning-deal-",PANE_ACCESSORY_LIGHTNING_DEAL_JOIN_WAITLIST_PREFIX:"#attach-accessory-deal-on-waitlist-",PANE_ACCESSORY_CSRF_TOKEN:"#attach-accessory-deal-csrf-token"};a.on(h.Accessories.SHOW,function(c){c.find(m.PANE_ACCESSORY_LIGHTNING_DEAL).each(function(){var c=a.$(this).data().idx;b(c);l(c)})});a.on(h.Accessories.ADD_TO_CART_STATUS,
function(b){if(b.dealInfo){var c=b.accessoryIndex,e=b.dealInfo.timeToCheckout;b=b.dealInfo.timeToCheckout;a.$("#attach_add_accessory-button-row-"+c).addClass("aok-hidden");"INWAITLIST"===b?a.$("#attach-accessory-deal-on-waitlist-"+c).removeClass("aok-hidden"):(a.$("#attach-accessory-deal-availability-details-"+c).addClass("aok-hidden"),a.$("#attach-accessory-time-to-checkout-"+c).val(e/1E3),a.$("#attach-accessory-ld-in-cart-details-"+c).removeClass("aok-hidden"),d(c))}})});"use strict";m.when("A",
"attach.events","attach-logging").register("attach.views.accessories.products",function(a,c,h){function b(){var b=[];a.$(e.PANE_ACCESSORY_ASIN).parent().each(function(c,e){e=a.$(e);if(e.is(":hidden")||"hidden"===e.css("visibility")||e.prop("data-accessory-seen"))return null;e.prop("data-accessory-seen",!0);b.push(h.getAccessoryLoggingData(c))});return b}var e={PANE_ACCESSORY_ASIN:".attach-accessory-asin",PANE_ACCESSORY_ADD_BUTTON_PREFIX:"#attach_add_accessory_button_",PANE_ACCESSORY_ADD_SPINNER_PREFIX:"#attach_add_accessory_spinner_",
PANE_ACCESSORY_ADD_SUCCESS_PREFIX:"#attach_add_accessory_alert_",PANE_ACCESSORY_ADD_ERROR_PREFIX:"#attach_add_accessory_error_",PANE_ACCESSORY_IMAGE:".attach-accessory-image"};a.on(c.Accessories.SHOW,function(b){b.find(e.PANE_ACCESSORY_IMAGE).each(function(){a.$(this).attr("src",a.$(this).attr("data-image-url"))})});a.on(c.Accessories.ADD_TO_CART_STATUS,function(b){a.$(e.PANE_ACCESSORY_ADD_BUTTON_PREFIX+b.accessoryIndex).toggleClass("aok-hidden","INITIAL"!==b.status);a.$(e.PANE_ACCESSORY_ADD_SPINNER_PREFIX+
b.accessoryIndex).toggleClass("aok-hidden","ADDING"!==b.status);a.$(e.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b.accessoryIndex).toggleClass("aok-hidden","SUCCESS"!==b.status);a.$(e.PANE_ACCESSORY_ADD_ERROR_PREFIX+b.accessoryIndex).toggleClass("aok-hidden","ERROR"!==b.status)});return{resetImpressions:function(){a.$(e.PANE_ACCESSORY_ASIN).parent().removeProp("data-accessory-seen")},logImpressions:function(){h.logAccessoryImpressions(b())}}});"use strict";m.when("A","attach.events").register("attach.views.accessories.see-more",
function(a,c){a.on(c.Accessories.SHOW,function(h){h.find(".card-expandable").each(function(){var b=a.$(this),e=b.find(".card-toggle-see-more"),h=b.find(".card-toggle-see-less"),d=b.find(".card-expand-content");e.show();h.hide();d.hide();b.removeProp("data-card-expanded");b.removeProp("data-card-previously-expanded");e.click(function(){e.hide();h.show();d.slideDown(400);b.prop("data-card-expanded",!0);b.parent().animate({scrollTop:b.get(0).offsetTop-30},400);var k=!!b.prop("data-card-previously-expanded");
k||b.prop("data-card-previously-expanded",!0);a.trigger(c.Accessories.SEE_MORE_EXPAND,{type:"EXPAND",$card:b,isFirstExpansion:!k})});h.click(function(){h.hide();e.show();d.slideUp(400);b.prop("data-card-expanded",!1);a.trigger(c.Accessories.SEE_MORE_COLLAPSE,{type:"COLLAPSE",$card:b})})})})});"use strict";m.when("A","attach.events").register("attach.views.accessories.tiles",function(a,c){function h(b){m.when("a-truncate").execute(function(c){b.find(e.ACCESSORY_TITLE).each(function(){c.get(this).update()});
b.find(e.ACCESSORY_TILE_ITEM).hover(function(){var b=a.$(this).find(e.ACCESSORY_TITLE);b.length&&c.get(b.get()).update()})})}function b(b){a.on(c.Accessories.ADD_TO_CART_STATUS,function(a){b.find(e.ACCESSORY_TILE_BADGE_PREFIX+a.accessoryIndex).toggleClass("aok-hidden","SUCCESS"!==a.status);b.find(e.ACCESSORY_TILE_ITEM_PREFIX+a.accessoryIndex).toggleClass("in-cart","SUCCESS"!==a.status)})}var e={ACCESSORY_TITLE:".attach-accessory-title",ACCESSORY_TILE_ITEM:".attach-accessory-tile",ACCESSORY_TILE_ITEM_PREFIX:"#attach-accessory-tile-",
ACCESSORY_TILE_BADGE_PREFIX:"#tile-add-accessory-badge-"};a.on(c.Accessories.SHOW,function(a){h(a);b(a)})});"use strict";m.when("A","attach-common","attach-logging","attach-weblabs","attach.events","attach.utilities.strings").register("attach.views.cart",function(a,c,h,b,e,k){function d(b,c,d){c=a.$(1===b?c:d).val();return k.substituteParameters(c,{quantity:b})}function l(b){var c=Number(b);b=isNaN(c)?"":100>c?b:"99+";a.$("#nav-cart-count").toggleClass("nav-cart-0",0===c).toggleClass("nav-cart-1",
1<=c&&10>c).toggleClass("nav-cart-10",10<=c&&20>c).toggleClass("nav-cart-20",20<=c&&100>c).toggleClass("nav-cart-100",100<=c).text(b)}function r(){h.logCount(h.CSM_METRICS.ATTACH_CART_CLICK);document.location=""}function f(){h.logCount(h.CSM_METRICS.ATTACH_CHECKOUT_CLICK);document.location=v?g.PROCEED_TO_CHECKOUT+"\x26cartInitiateId\x3d"+v+"\x26ref_\x3ddp_atch_dss_proceed":g.PROCEED_TO_CHECKOUT+"\x26ref_\x3ddp_atch_dss_proceed"}function t(){var b=a.$(n.PANE_HUC_MESSAGE);if(b.hasClass("aok-hidden")){b.css({position:"absolute",
top:0}).removeClass("aok-hidden");var c=b.children().height();0<c&&b.css({marginTop:-1*(c+4)+"px",position:"initial"}).animate({marginTop:"14px"},800)}}function u(b){var c=a.$(n.PANE_CART_BLOCK),d=a.$(n.PANE_CART_BLOCK_INNER),e=a.$(n.PANE_CART_SPINNER);0===d.find(e).length&&d.append(e);"PENDING"===b?(d.find("div").addClass("aok-hidden"),e.removeClass("aok-hidden")):"VISIBLE"===b?(d.find("div").removeClass("aok-hidden"),e.addClass("aok-hidden")):"HIDDEN"===b&&(d.find("div").addClass("aok-hidden"),
e.addClass("aok-hidden"),c.addClass("aok-hidden"))}var v,n={NAVBAR_CART_COUNT:"#nav-cart-count",STRING_CART_SUBTOTAL_SINGLE:"#attach-string-cart-subtotal-single",STRING_CART_SUBTOTAL_MULTIPLE:"#attach-string-cart-subtotal-multiple",STRING_CART_CHECKOUT_SINGLE:"#attach-string-cart-ptc-button-single",STRING_CART_CHECKOUT_MULTIPLE:"#attach-string-cart-ptc-button-multiple",PANE_CART_BASE_ALERT_IMAGE_AREA:"#attach-added-to-cart-alert-and-image-area",PANE_CART_BASE_ALERT:"#attachDisplayAddBaseAlert",PANE_CART_BASE_SUCCESS_ALERT:"#attachAddBaseItemSuccessAlert",
PANE_CART_BASE_ERROR_ALERT:"#attachAddBaseItemErrorAlert",PANE_CART_BASE_INITIAL_IMAGE:"#attach-sheet-view-base-product-image",PANE_CART_BASE_HUC_IMAGE:".huc-image-wrapper",PANE_CART_BLOCK:".attach-primary-atc-confirm-box",PANE_CART_BLOCK_INNER:"#attach-added-to-cart-message",PANE_CART_BLOCK_SUBTOTAL_LABEL:"#attach-accessory-cart-total-string",PANE_CART_BLOCK_SUBTOTAL_PRICE:"#attach-accessory-cart-subtotal",PANE_CART_BLOCK_CORE_FREE_SHIPPING_MESSAGE:"#attach-core-free-shipping-message",PANE_CART_BLOCK_PROCEED_TO_CHECKOUT:"#attach-accessory-proceed-to-checkout-text",
PANE_CART_SPINNER:"#attach-add-to-cart-message-spinner",PANE_VIEW_CART_BUTTON:"#attach-sidesheet-view-cart-button",PANE_CHECKOUT_BUTTON:"#attach-sidesheet-checkout-button",PANE_HUC_MESSAGE:".attach-add-to-cart-message-card"},g={PROCEED_TO_CHECKOUT:"/gp/cart/desktop/go-to-checkout.html?proceedToCheckout\x3dProceed"};a.on(e.Accessories.SHOW,function(a){a.find(n.PANE_VIEW_CART_BUTTON).click(r);a.find(n.PANE_CHECKOUT_BUTTON).click(f);b.isAttachLDSupportEnabled()&&c.selectedBaseLightningDeal?u("HIDDEN"):
u("PENDING")});a.on(e.Accessories.HIDE,function(a){a.find(n.PANE_HUC_MESSAGE).remove()});a.on(e.Cart.UPDATE_SUMMARY,function(e){b.isAttachLDSupportEnabled()&&c.selectedBaseLightningDeal||u("VISIBLE");a.$(n.PANE_CART_BLOCK_SUBTOTAL_PRICE).html(e.subtotal.displayString);a.$(n.PANE_CART_BLOCK_SUBTOTAL_LABEL).html(d(e.itemCount,n.STRING_CART_SUBTOTAL_SINGLE,n.STRING_CART_SUBTOTAL_MULTIPLE));a.$(n.PANE_CART_BLOCK_PROCEED_TO_CHECKOUT).html(d(e.itemCount,n.STRING_CART_CHECKOUT_SINGLE,n.STRING_CART_CHECKOUT_MULTIPLE));
l(e.itemCount);a.$("#attach-customerId").val()&&m.when("attach-preinitiate-checkout").execute(function(a){v=a.getCartInitiateId();a.preinitiateCheckout(v)});t()});a.on(e.Cart.ADD_BASE_HUC_SUCCESS,function(b){b=a.$(b);var d=a.$().add(b.find("#huc-v2-message-group")).add(b.find("#hlb-imb"));if(0<d.length){var e=a.$("\x3cdiv class\x3d'attach-sidesheet-card attach-add-to-cart-message-card aok-hidden'\x3e\x3c/div\x3e");e.append(d);e.insertAfter(n.PANE_CART_BLOCK);e.find(".a-declarative a").unwrap();e.find(".a-declarative span").removeClass("a-color-link huc-cursor-pointer").unwrap();
e.find(".sc-action-quantity").hide();(d=d.find(".a-alert-heading").text())&&h.logDSSWarningMessage(d)}var f;d=b.find("#huc-v2-order-row-confirm-text, #hl-confirm-text");d.length&&(f=d.hasClass("a-color-error")||d.hasClass("a-alert-warning"));f=(f?a.$(n.PANE_CART_BASE_ERROR_ALERT):a.$(n.PANE_CART_BASE_SUCCESS_ALERT)).clone().prop("id","attachDisplayAddBaseAlert");a.$(n.PANE_CART_BASE_ALERT).remove();a.$(n.PANE_CART_BASE_ALERT_IMAGE_AREA).prepend(f);f=b.find(".huc-v2-order-row-image").clone();f.length||
(f=b.find(".hlb-product-image").clone());if(1<f.length&&(f=f.first(),d=a.$('input[name^\x3d"asin"].attach-warranty-input'),0===d.length&&(d=a.$('.abbListItem.mbb__r input[name^\x3d"asin"]')),d.length))for(e=0;e<d.length;e++){var g=d[e].value,k=b.find("#huc-v2-order-row-item-"+g);if(k.length){b=c.elementExists(k)?k.find(".huc-v2-order-row-image"):b.find(".hlb-item-link.hlb-asin-"+g+" \x3e img");f=f.add(b.clone());break}}a.$(n.PANE_CART_BASE_HUC_IMAGE).remove();a.$(n.PANE_CART_BASE_INITIAL_IMAGE).hide().parent().append(f);
f.wrap('\x3cdiv class\x3d"huc-image-wrapper"\x3e\x3c/div\x3e')})})});